window.getVPAIDAd=function(){(function(){var T=document.createElement("STYLE");T.innerHTML='.ad_controls_place {position: relative;outline: none;z-index: 0;font: 400 14px/1.2 \'Roboto\', sans-serif;overflow: hidden;}.ad_controls_place:-webkit-full-screen{position: absolute;top: 0;left: 0;width: 100% !important;height: 100% !important;}.ad_controls_place:-moz-full-screen{top: 0;left: 0;position: absolute;width: 100% !important;height: 100% !important;}.ad_controls_place .no-animate,.ad_controls_place .no-animate *{transition: none !important;}.ad_controls_place .error.fatal {position: absolute;top: 45%;width: 100%;color: rgb(255, 82, 82);font-size: 20pt;text-align: center;}.ad_controls_place .loader {position: absolute;left: 0;right: 0;top: 0;bottom: 0;background: rgba(0, 0, 0, 0.7);z-index: -1;opacity: 0;transition: opacity ease .3s;}.ad_controls_place.wait .loader {opacity: 1;z-index: 10;}.ad_controls_place * {padding: 0;margin: 0;box-sizing: border-box;}.ad_controls_place > .screen {width: 100%;height: 100%;top: 0;position: absolute;background: black;z-index: 0;}.ad_controls_place .poster {position: absolute;left: 0;top: 0;width: 100%;height: 100%;background-repeat: no-repeat;background-position: 50% 50%;background-size: contain;background-color: black;cursor: pointer;z-index: 10;}.ad_controls_place .poster svg {position: absolute;width: 160px;height: 160px;left: 50%;top: 50%;margin: -80px 0 0 -80px;}.ad_controls_place .poster:hover svg > path {fill: rgba(255,255,255,0.9);}.Ad {position: absolute;left: 0;top: 0;width: 100%;height: 100%;z-index: 1000;background: #000;outline: none;}.ad_controls_place .non-linear-ads {position: absolute;right: 10px;bottom: 60px;cursor: pointer;transition: opacity ease 1s;}.ad_controls_place .non-linear-ads .close {position: absolute;right: 0px;top: 0px;border: 1px solid #444;background: #fff;text-align: center;width: 20px;height: 20px;cursor: pointer;}.ad_controls_place>.controls {position: absolute;left: 0px;right: 0px;bottom: 0px;height: 69px;background: none;background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAABFCAYAAACL3IzzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjBCQUNBRUVFNjM5QjExRTVBQjkzRDJCRDQyRkU1MEE0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjBCQUNBRUVGNjM5QjExRTVBQjkzRDJCRDQyRkU1MEE0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MEJBQ0FFRUM2MzlCMTFFNUFCOTNEMkJENDJGRTUwQTQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MEJBQ0FFRUQ2MzlCMTFFNUFCOTNEMkJENDJGRTUwQTQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4PyzKNAAAAbElEQVR42myPUQ6AMAhDK9u1jB/e/0xV6NaQ6M/SBy0w3NcZAfAIEBEECvNJJLaqGjGMw4lUSgzjVlVLxAdnjk9lM9+aUKrmcWqvVI+5oZgbZeH0yo4yr/vWvIZ90TpIX9Xh8NCfmxfK/AgwACr2StbF5TFoAAAAAElFTkSuQmCC\');z-index: 9;opacity: 1;transition: opacity ease .3s;}.hide > .controls {opacity: 0;}.ad_controls_place>.controls svg {fill: #FFFFFF;}.ad_controls_place>.controls svg:hover {fill: #FCC010;}.ad_controls_place>.controls .play-pause {position: absolute;left: 20px;bottom: 10px;cursor: pointer;width: 24px;height: 24px;overflow: hidden;}.ad_controls_place>.controls .play-pause path.play {display: block;}.ad_controls_place>.controls .play-pause path.pause {display: none;}.ad_controls_place.playing>.controls .play-pause path.play {display: none;}.ad_controls_place.playing>.controls .play-pause path.pause {display: block;}.ad_controls_place>.controls .timer {position: absolute;bottom: 12px;left: 50px;color: #fff;font-size: 12px;padding: 0;line-height: 20px;height: 20px;vertical-align: middle;}.ad_controls_place>.controls .time-label {position: absolute;color: #fff;background: #000;border-radius: 5px;padding: 5px 10px;text-align: center;width: 70px;bottom: 60px;margin-left: -35px;opacity: 0;cursor: default;transition: opacity ease .5s;}.ad_controls_place>.controls .time-label:after {content: "";position: absolute;width: 0;height: 0;top: 100%;left: 50%;border-style: solid;border-color: transparent;border-width: 5px;border-top-color: #000;margin-left: -5px;}.ad_controls_place>.controls .time-label.show {opacity: 1;}.ad_controls_place>.controls .progress {position: absolute;left: 0px;right: 0px;bottom: 45px;height: 17px;background: none;cursor: pointer;border-bottom: 5px solid rgba(108, 108, 108, 0.5);z-index: 0;}.ad_controls_place>.controls .progress.readonly {border-bottom-width: 2px;cursor: default;}.ad_controls_place>.controls .progress .load {position: absolute;height: 5px;left: 0;bottom: -5px;background: rgba(154, 154, 156, 0.5);z-index: 0;transition: width ease .3s;}.ad_controls_place>.controls .progress.readonly .load {height: 2px;bottom: -2px;}.ad_controls_place>.controls .progress .play {position: absolute;left: 0;bottom: -5px;height: 5px;background: #FCC010;z-index: 10;transition: width ease .3s;}.ad_controls_place>.controls .progress.readonly .play {background: #BEBEBE;height: 2px;bottom: -2px;}.ad_controls_place>.controls .progress.readonly .play:after {display: none;}.ad_controls_place>.controls .progress .play:after {content: "";position: absolute;right: 0px;top: 0px;background: inherit;border-radius: 50%;width: 0px;height: 0px;border: none;margin: 3px 0 0 0;transition:margin ease .3s,width ease .3s,height ease .3s;}.ad_controls_place>.controls .progress:hover .play:after {width: 12px;height: 12px;margin: -3px -6px 0 0;}.ad_controls_place>.controls .tray {position: absolute;bottom: 10px;right: 20px;height: 24px;white-space: nowrap;}.ad_controls_place>.controls .tray > *{position: relative;width: 24px;height: 24px;overflow: hidden;margin: 0 0 0 15px;display: inline-block;cursor: pointer;vertical-align: middle;}.ad_controls_place>.controls .mute {cursor: default !important;}.ad_controls_place>.controls .mute svg {fill: #fff !important;}.ad_controls_place>.controls .mute svg .mute {display: none;}.ad_controls_place.muted>.controls .mute svg .unmute {display: none;}.ad_controls_place.muted>.controls .mute svg .mute {display: block;}.ad_controls_place>.controls .volume {position: relative;width: 100px;height: 5px;background: #6C6C6C;margin-top: -1px;margin-left: 5px;overflow: visible;}.ad_controls_place>.controls .volume .level{position: absolute;left: 0;height: 100%;background: #FFFFFF;transition: width ease .3s;}.ad_controls_place>.controls .volume .level:after {content: "";position: absolute;right: 0px;top: 0px;background: inherit;border-radius: 50%;width: 0px;height: 0px;border: none;margin: 3px 0 0 0;transition:margin ease .3s,width ease .3s,height ease .3s;}.ad_controls_place>.controls .volume:hover .level:after {width: 12px;height: 12px;margin: -3px -6px 0 0;}.ad_controls_place.fullscreen .tray .fullscreen .off { display: block; }.ad_controls_place.fullscreen .tray .fullscreen .on { display: none; }.ad_controls_place .tray .fullscreen .off { display: none; }.ad_controls_place .tray .fullscreen .on { display: block; }.ad_controls_place .tray .hq {width: 32px;}.ad_controls_place .ad-info {position: absolute;right: 5px;vertical-align: middle;top: 10px;color: #fff;font-size: 13pt;z-index: 10;background: rgba(0,0,0,0.5);padding: 5px 10px;}.ad_controls_place .ad-info .ad-link{color: #fff;border-bottom: 1px dashed #fff;text-decoration: none;cursor: pointer;}.ad_controls_place .ad-skip {position: absolute;display: table;right: 5px;bottom: 70px;padding: 5px;background: rgba(0,0,0,0.4);cursor: pointer;z-index: 10;}.ad_controls_place .ad-skip  > .message {display: table-cell;color: #fff;vertical-align: middle;text-align: center;font-size: 12pt;padding-right: 10px;}.ad_controls_place .ad-skip > img {display: table-cell;height: 60px;}';document.head.appendChild(T)})();function u(U,V){var T=new RegExp("(^|\\s)"+V+"(\\s|$)","g");if(T.test(U.className)){return}U.className=(U.className+" "+V).replace(/\s+/g," ").replace(/(^ | $)/g,"")}function n(U,V){var T=new RegExp("(^|\\s)"+V+"(\\s|$)","g");U.className=U.className.replace(T,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"")}function L(U,V){var T=new RegExp("(^|\\s)"+V+"(\\s|$)","g");return T.test(U.className)}function y(V,U){if(V){for(var T=0;T<V.length;T++){if(U(V[T])===false){break}}}}function w(V){var U=[];for(var T in V){if(V.hasOwnProperty(T)){U.push(T)}}return U}function G(T){return typeof T==="object"&&T!==null&&T.constructor===Object}function z(T){return T?(G(T)?w(T).length==0:T.length==0):true}function o(U,T){y(w(T),function(V){if(G(U[V])&&G(T[V])&&!z(U[V])){o(U[V],T[V])}else{if(typeof U[V]!=="undefined"){U[V]=T[V]}}});return U}function j(U,T){y(w(T),function(V){if(G(U[V])&&G(T[V])&&!z(U[V])){j(U[V],T[V])}else{U[V]=T[V]}});return U}function E(V,U){for(var T=0;T<V.length;T++){if(!U(V[T])){return false}}return true}function D(aa,Y,X,W){if(Y instanceof Array){for(var U=0;U<Y.length;U++){D(aa,Y[U],X,W)}}else{var Z=Y.split(".")[0];var T=Y.split(".")[1]||null;var V=function(ab){if(X.call(W?W:aa,ab)===false){ab.stopPropagation();ab.preventDefault()}};if(!aa.__events){aa.__events={}}aa.__events=aa.__events||{};aa.__events[Z]=aa.__events[Z]||[];aa.__events[Z].push({tag:T,handler:V});aa.addEventListener(Z,V,false)}}function M(Y,W){if(W instanceof Array){for(var V=0;V<W.length;V++){M(Y,W[V])}}else{var X=W.split(".")[0];var T=W.split(".")[1]||null;var U=Y.__events[X];for(var V=0;V<U.length;V++){if(U[V]&&(T===null||U[V].tag==T)){Y.removeEventListener(X,U[V].handler,false);U[V]=null}}}}function A(T){var U=document.createElement("DIV");U.innerHTML=T;return U.firstChild}function q(){var T=navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin.description;return !!T}function c(V,T){var U={};y(document.cookie.split(";"),function(W){var X=W.split("=");if(X.length==2){U[X[0].trim()]=X[1].trim()}});return U[V]&&!isNaN(U[V])?U[V]:T}function f(T,U){document.cookie=T+"="+U+"; path=/"}function K(U,W){var T=this;var V=new XMLHttpRequest();V.onreadystatechange=function(){if(V.readyState==4){W(V.status==200,V)}};V.open("GET",U,true);V.send(null);return V}CustomObject={proxy:function(U,V){if(U instanceof Array){for(var T=0;T<U.length;T++){this.proxy(U[T],V)}}else{this.on(U,function(){var W=Array.prototype.splice.call(arguments,1);V.trigger.apply(V,[U].concat(W))})}},on:function(X,W,V){var T=this;this._handlers=this._handlers||{};if(X instanceof Array){for(var U=0;U<X.length;U++){this.on(X[U],W,V)}}else{if(typeof this._handlers[X]==="undefined"){this._handlers[X]=[]}this._handlers[X].push({_id:this._handlers[X].length,handler:W,scope:V||this,remove:function(){T._handlers[X][this._id]=null}})}return this},trigger:function(X){this._handlers=this._handlers||{};var V=Array.prototype.splice.call(arguments,1);var T=(this._handlers[X]||[]).concat(this._handlers["*"]||[]);for(var W=0;W<T.length;W++){if(h=T[W]){var U=h.handler.apply(h.scope,[{type:X,handler:h}].concat(V));if(U===false){break}}}return this}};function C(T,V){var U=((new Date).getTime()/1000)|0;var V=j({CACHEBUSTER:U,CACHE_BUSTER:U,timestamp:U},V);y(w(V),function(W){T=T.replace("["+W+"]",encodeURIComponent(V[W]))});return T}function l(U,W){var T=new Image;var U=C(U,W);var V=U.indexOf("?")==-1?"?":"&";T.src=U}function d(T,U){window.open(C(T,U),"_blank")}function H(T){var U={};if(T){y(T.getElementsByTagName("Tracking"),function(V){var X={};var W=V.getAttribute("event");if(typeof U[W]==="undefined"){U[W]=[]}X.content=V.textContent;y(V.attributes,function(Y){X[Y.name]=Y.value});U[W].push(X)})}return U}function J(T){T=T.trim();if(match=/^(\d{1,2}):(\d{1,2}):(\d{1,2})/.exec(T)){return{type:"seconds",value:parseInt(match[1])*3600+parseInt(match[2])*60+parseInt(match[3])}}if(match=/^(\d{1,3})%$/.exec(T)){return{type:"percent",value:parseInt(match[1])}}}function v(T,U){if(T=="html"){elm=document.createElement("DIV");elm.innerHTML=U}else{if(T=="iframe"){elm=document.createElement("IFRAME");elm.src=U;elm.style.border="none";elm.scrolling="no"}else{if(T=="application/x-shockwave-flash"){elm=document.createElement("OBJECT");elm.setAttribute("type","application/x-shockwave-flash");elm.setAttribute("data",U)}else{elm=document.createElement("IMG");elm.src=U}}}return elm}function s(U){if(U&&U.length){for(var T=0;T<U.length;T++){l(U[T].content)}}}function P(U){var T=this;this.type;this.src;this.creative;j(this,U);this.vpaid=null;this.on("vpaidevent",function(Z,Y,X){console.log(">>>VPAID Log:",Y,X);switch(Y){case"AdLoaded":T.vpaid.startAd();break;case"AdClickThru":var W=X[0];var V=X[2];T.trigger("vastevent","clickthru",{click_through:W,no_fire_pixel:!V},T);break;case"AdSkipped":T.trigger("vastevent","skip",{},T);break;case"AdStopped":T.trigger("vastevent","complete",{},T);break;case"AdError":T.trigger("vasterror",901,X);break;case"AdStarted":T.trigger("vastevent","start",{},T);T.trigger("vastevent","creativeView",{},T);break;case"AdVideoFirstQuartile":T.trigger("vastevent","firstQuartile",{},T);break;case"AdVideoMidpoint":T.trigger("vastevent","midpoint",{},T);break;case"AdVideoThirdQuartile":T.trigger("vastevent","thirdQuartile",{},T);break}})}P.prototype=j(Object.create(CustomObject),{vpaidEventsList:["AdLoaded","AdSkipped","AdStarted","AdStopped","AdLinearChange","AdSkippableStateChange","AdSizeChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"],show:function(U,Y,T,W){var V=this;var X=A('<iframe id="iframe" frameborder="no" scrolling="no" allowfullscreen></iframe>');X.width=Y;X.height=T;U.appendChild(X);var Z=setTimeout(function(){V.trigger("vasterror",900,"Timeout VPAID AdLoaded event")},W.timeout);this.on("vpaidevent",function(ab,aa){if(aa=="AdLoaded"||aa=="AdStarted"||aa=="AdError"){clearTimeout(Z)}});if(this.type=="application/x-shockwave-flash"){this.showFlash(X,Y,T,W)}else{this.showJS(X,Y,T,W,X)}},showFlash:function(V,T,aa,ac){var ab=this;var Y=V.contentDocument;var W=V.contentWindow;var Z="_custom_player_vpaid_on_ready"+Math.random().toString(16).split(".")[1];var X="_custom_player_vpaid_on_error"+Math.random().toString(16).split(".")[1];var U=function(af,ae){var ag="_custom_player_vpaid_"+af+Math.random().toString(16).split(".")[1];V.contentWindow[ag]=ae;ab.vpaid.subscribe(af,ag)};V.contentWindow[X]=function(){ab.trigger("vpaidevent","AdError")};V.contentWindow[Z]=function(){ab.vpaid=V.contentWindow.vpaid;console.log("--VPAID version:",ab.vpaid.handshakeVersion("2.0"));console.log("getAdLinear:",ab.vpaid.getAdLinear());U("AdLoaded",function(){ab.vpaid.startAd()});y(ab.vpaidEventsList,function(ae){U(ae,function(af){ab.trigger("vpaidevent",ae,af)})});ab.vpaid.initAd(T,aa,"normal",500,ab.creative.params,"")};Y.open();Y.write('<body style="padding:0; margin:0; width:100%; height:100%;"><object id="vpaid" type="application/x-shockwave-flash" width="100%" height="100%" data="'+ac.vpaid_flash_bridge+'"><param name="allowScriptAccess" value="always"></param><param name="allowNetworking" value="all"></param><param name="wmode" value="transparent"><param name="flashvars" value="onReady='+Z+"&onError="+X+"&src="+encodeURIComponent(this.src)+'"></param></object></body>');Y.close();console.log(this)},showJS:function(X,W,T,V){var U=this;X.contentWindow.trigger_error=function(){U.trigger("vpaidevent","AdError","Can't load vpaid file")};X.contentWindow.trigger_load=function(){var Y=X.contentWindow.getVPAIDAd;if(typeof Y!=="function"){U.trigger("vasterror",901,"General VPAID error.",U.creative);return}U.vpaid=Y();y(U.vpaidEventsList,function(Z){U.vpaid.subscribe(function(){U.trigger("vpaidevent",Z,arguments)},Z)});U.vpaid.initAd(W,T,"normal",500,U.creative.params,{slot:X.contentDocument.body})};X.contentDocument.open();X.contentDocument.write('<body style="margin:0; padding:0; width:100%; height:100%;"><script src="'+this.src+'" onload="trigger_load()" onerror="trigger_error()"><\/script></body>');X.contentDocument.close()},getIsSupport:function(){var T=["application/javascript","application/x-javascript"];if(q()){T.push("application/x-shockwave-flash")}return T.indexOf(this.type)>-1}});function O(T,V){this.root=T;this.is_show_poster=false;this.is_loading=false;this.is_playing=false;this.is_muted=false;this.is_start_load=false;this.duration=null;this.sources=[];this._handlers={};this._plugins={};this.conf={baseCSSClass:"customPlayer",muted:false,autoplay:false,sources:[],plugins:{},defaultVolume:1,allow_backends:w(this.__backends),flash_swf:"video.swf",cookieKeyVolume:null};o(this.conf,V);u(this.root,this.conf.baseCSSClass);if(this.conf.plugins){this._initPlugins(this.conf.plugins)}var U=this;setTimeout(function(){if(U.conf.sources){U.setSources(U.conf.sources)}U._init()},0)}O.prototype=j(Object.create(CustomObject),{__backends:{},__plugins:{},_init:function(){if(this.conf.autoplay){this.play()}if(this.conf.cookieKeyVolume){this.setVolume(c(this.conf.cookieKeyVolume,this.conf.defaultVolume))}else{this.setVolume(this.conf.defaultVolume)}if(this.conf.muted){this.mute()}},_destroyBackend:function(){if(this.backend){this.backend.destroy();this.root.removeChild(this.backend.getElement())}},_initBackend:function(V){var T=this;this.trigger("waiting");if(!(this.backend instanceof V)){if(this.backend){this._destroyBackend()}this.backend=new V({flash_swf:this.conf.flash_swf});this.backend.on("play",function(){T.is_playing=true});this.backend.on("pause",function(){T.is_playing=false});this.backend.on("ended",function(){T.is_playing=false});this.backend.on("error",function(Y,X,W){T.error(X,W)});this.backend.on("timeupdate",function(X,W){T.trigger("timeupdate",W,T.getDuration())});this.backend.on("ready",function(){this.setVolume(T.volume+0.1);this.setVolume(T.volume-0.1);this.setVolume(T.volume)});this.backend.proxy(["waiting","playing","seeking","seeked","progress","ended","volumechange","play","canplay","pause"],this);this.backend.init();var U=this.backend.getElement();U.style.width="100%";U.style.height="100%";U.style.position="absolute";U.style.left=0;U.style.top=0;this.root.appendChild(U);this.trigger("backendchange",this.backend)}},_initSources:function(X){var U=this.conf?this.conf.allow_backends:w(this.__backends);var T=this.__backends;for(var Y=0;Y<U.length;Y++){var W=U[Y];if(typeof T[W]==="undefined"){continue}for(var V=0;V<X.length;V++){if(T[W].prototype.isSupported()&&T[W].prototype.canPlayType(X[V].type)){this._initBackend(T[W]);this.source=X[V];this.trigger("sourcechange",this.source);return true}}}return false},_initPlugins:function(U){for(var T in U){if(U[T]&&(typeof U[T].enabled==="undefined"||U[T].enabled)){this._plugins[T]=new this.__plugins[T](this,U[T])}}},getWidth:function(){return this.root.offsetWidth},getHeight:function(){return this.root.offsetHeight},supportMedia:function(X){var U=this.conf?this.conf.allow_backends:w(this.__backends);var T=this.__backends;for(var W=0;W<U.length;W++){var V=U[W];if(typeof T[V]==="undefined"){continue}if(T[V].prototype.isSupported()&&T[V].prototype.canPlayType(X)){return true}}return false},destroy:function(){if(this.backend){this._destroyBackend();this.backend=null}this._handlers={};this.root.parentElement.removeChild(this.root);return this},decodeErrorCode:function(T){var U={100:"We are working to fix this as soon as possible. Thanks for patience.",101:"Your browser can not reproduce this video. Please update your browser for the best viewing experience.",102:"Oops, try again! There is no video.",200:"We are working to fix this as soon as possible. Thanks for patience.",201:"Video temporarily is unavailable, please try again later."};return U[T]||"Unknown error"},error:function(U,T){this.trigger("error",U,T||this.decodeErrorCode(U))},setSources:function(T){if(T&&T.length){if(this.is_playing){this.pause()}this.source=null;this.sources=T}else{this.error(102)}return this},load:function(){var T=this;if(this.sources&&this.sources.length){if(this._initSources(this.sources)){if(this.backend.is_ready){this.backend.setSource(T.source.src,T.source.type)}else{this.backend.on("ready",function(U){U.handler.remove();this.setSource(T.source.src,T.source.type)})}this.is_start_load=true}else{this.error(101)}}else{this.error(102)}},play:function(){if(!this.is_playing){this.is_playing=true;if(this.is_start_load){this.backend.play()}else{this.on("canplay",function(T){T.handler.remove();this.backend.play()});this.load()}}return this},pause:function(){if(this.is_playing){this.backend.pause();this.is_playing=false}return this},getVolume:function(){if(this.backend){this.volume=this.backend.getVolume()}return this.volume},setVolume:function(T){this.volume=Math.min(1,Math.max(0,T));if(this.conf.cookieKeyVolume){f(this.conf.cookieKeyVolume,this.volume)}this.trigger("volumechange",this.volume);if(this.backend){this.backend.setVolume(this.volume)}},mute:function(){this._old_volume=this.getVolume();this.setVolume(0)},unmute:function(){this.setVolume(this._old_volume||1)},getDuration:function(){return this.backend.getDuration()},getCurrentTime:function(){return this.backend.getCurrentTime()},setProgress:function(T){var U=this.getDuration()/100*T;this.backend.setCurrentTime(U)},getProgress:function(){if(this.backend){return this.getCurrentTime()/this.getDuration()*100}else{return 0}}});HTML5Backend=(function(){function T(U){this.width="100%";this.height="100%";j(this,U);this.video=document.createElement("VIDEO")}T.prototype=j(Object.create(CustomObject),{is_ready:false,isSupported:function(){return typeof document.createElement("VIDEO").play=="function"},canPlayType:function(V){var U=["maybe","probably"].indexOf(document.createElement("VIDEO").canPlayType(V))>-1;return U},setSource:function(W,V){var U=this;if(["maybe","probably"].indexOf(this.video.canPlayType(V))>-1){this.video.src=W;this.video.load()}},getElement:function(){return this.video},destroy:function(){this.video.oncontextmenu=null},setWidth:function(U){this.video.style.width=U},setHeight:function(U){this.video.style.height=U},init:function(){var U=this;this.setWidth(this.width);this.setHeight(this.height);this.initEvents();this.on("ready",function(){U.is_ready=true});this.trigger("ready")},initEvents:function(){var U=this;this.video.onerror=function(){};this.video.oncontextmenu=function(){event.preventDefault()};this.video.addEventListener("loadedmetadata",function(){U.trigger("canplay")});this.video.addEventListener("durationchange",function(){U.trigger("durationchange",this.duration)});this.video.addEventListener("volumechange",function(){U.trigger("volumechange",this.muted?0:this.volume)});this.video.addEventListener("timeupdate",function(){var V=false;for(var W=0;W<this.buffered.length;W++){if(this.currentTime>this.buffered.start(W)&&this.currentTime<this.buffered.end(W)){V=this.duration-this.buffered.end(W)<0.5||Math.abs(this.currentTime-this.buffered.end(W))>0.5;break}}if(V){if(U.is_waiting){U.trigger("playing");U.is_waiting=false}}else{U.is_waiting=true;U.trigger("waiting")}U.trigger("timeupdate",this.currentTime);if(this.duration&&this.duration-this.currentTime<0.5){U.trigger("ended");this.pause();this.currentTime=0}});this.video.addEventListener("ended",function(){U.trigger("ended")});this.video.addEventListener("waiting",function(){U.trigger("waiting")});this.video.addEventListener("playing",function(){U.trigger("playing")});this.video.addEventListener("play",function(){U.trigger("play")});this.video.addEventListener("pause",function(){U.trigger("pause")});this.video.addEventListener("canplay",function(){U.trigger("canplay")});this.video.addEventListener("seeking",function(){U.trigger("seeking")});this.video.addEventListener("seeked",function(){U.trigger("seeked")});this.video.addEventListener("progress",function(){var W=[];for(var V=0;V<this.buffered.length;V++){W.push([this.buffered.start(V),this.buffered.end(V)])}U.trigger("progress",W)})},play:function(){this.video.play()},pause:function(){this.video.pause()},getCurrentTime:function(){return this.video.currentTime},getDuration:function(){return this.video.duration},setCurrentTime:function(U){if(this.video.readyState!=HTMLMediaElement.HAVE_NOTHING){this.video.currentTime=Math.max(0,Math.min(this.video.duration-0.9,U))}},setVolume:function(U){U=Math.max(0,Math.min(1,U||0));this.video.volume=U;this.video.muted=!U},getVolume:function(){return this.video.volume}});return T})();O.prototype.__backends.HTML5=HTML5Backend;function B(T){this.flash_swf=null;o(this,T);this.swf=document.createElement("OBJECT")}B.prototype=j(Object.create(CustomObject),{is_ready:false,_flashFn:function(U){var T="window";var V="__"+Math.random().toString(16).split(".")[1];window[V]=function(){U.apply(window,arguments)};return T+"."+V},init:function(){var T=this;this.on("ready",function(){T.is_ready=true});this.swf.setAttribute("type","application/x-shockwave-flash");this.swf.setAttribute("width","100%");this.swf.setAttribute("height","100%");this.swf.setAttribute("data",this.flash_swf);u(this.swf,"screen");var W={wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all",quality:"high",flashvars:"readyFunction="+this._flashFn(function(){T.initEvents()})};for(var U in W){var V=document.createElement("PARAM");V.setAttribute("name",U);V.setAttribute("value",W[U]);this.swf.appendChild(V)}},isSupported:function(){return q()},canPlayType:function(T){return["video/mp4","video/flv","video/x-flv","video/m4v","application/x-mpegURL"].indexOf(T)>-1},getElement:function(){return this.swf},destroy:function(){clearInterval(this._play_interval)},initEvents:function(){var T=this;this.swf.vjs_setProperty("eventProxyFunction",this._flashFn(function(V,U){switch(U){case"playing":T.trigger("playing");break;case"seeked":T.trigger("seeked");break;case"waiting":T.trigger("waiting");break;case"ended":T.trigger("ended");break;case"canplay":case"loadedmetadata":T.trigger("canplay");break;case"play":T.trigger("play");break;case"volumechange":T.trigger("volumechange",T.getVolume());break;case"durationchange":T.trigger("durationchange",T.getDuration());break}}));this.swf.vjs_setProperty("errorEventProxyFunction",this._flashFn(function(V,U){switch(U){case"srcnotfound":T.trigger("error",201);break;default:T.trigger("error",200)}}));this.on("play",function(){T.__timeupdate=setInterval(function(){T.trigger("progress",[[0,T.swf.vjs_getProperty("buffered")]]);T.trigger("timeupdate",T.getCurrentTime())},500)});this.on(["pause","ended"],function(){clearInterval(T.__timeupdate)});this.trigger("ready")},setSource:function(T){this.swf.vjs_src(T)},play:function(){this.swf.vjs_play()},pause:function(){this.swf.vjs_pause();this.trigger("pause")},getCurrentTime:function(){if(this.swf.vjs_getProperty){return this.swf.vjs_getProperty("currentTime")}return 0},getDuration:function(){if(this.swf.vjs_getProperty){return this.swf.vjs_getProperty("duration")}return 0},setCurrentTime:function(T){this.swf.vjs_setProperty("currentTime",T)},setVolume:function(T){this.swf.vjs_setProperty("volume",T)},getVolume:function(T){return this.swf.vjs_getProperty("volume")}});O.prototype.__backends.Flash=B;function g(U){var T=this;this.type;this.src;this.creative;j(this,U);this.player=null;this.use_html5=false;this.use_flash=false}g.prototype=j(Object.create(CustomObject),{show:function(U,Y,T,W){var V=this;this.player=new O(U,W);this.player.on("error",function(){});this.player.on("ended",function(){V.trigger("vastevent","complete",{},V.creative)});this.player.on("canplay",function(aa){aa.handler.remove();V.trigger("start",V);V.player.play()});this.player.on("pause",function(){V.trigger("vastevent","pause",{},V.creative)});this.player.on("resume",function(){V.trigger("vastevent","resume",{},V.creative)});var X;this.player.on("volumechange",function(ab,aa){if(aa>0&&X==0){V.trigger("vastevent","unmute",{},V.creative)}if(aa==0&&X!=0){V.trigger("vastevent","mute",{},V.creative)}X=aa});var Z=0;this.player.on("timeupdate",function(ac,ab){var aa=ab/this.getDuration()*100;if(aa>0&&Z==0){Z++;V.trigger("vastevent","start",{},V.creative);V.trigger("vastevent","creativeView",{},V.creative)}if(aa>25&&Z==1){Z++;V.trigger("vastevent","firstQuartile",{},V.creative)}if(aa>50&&Z==2){Z++;V.trigger("vastevent","midpoint",{},V.creative)}if(aa>75&&Z==3){Z++;V.trigger("vastevent","thirdQuartile",{},V.creative)}});this.player.setSources([{src:this.src,type:this.type}]);this.player.load()},getIsSupport:function(){return O.prototype.supportMedia(this.type)}});function Q(U,T){this.creative;this.is_vpaid=false;j(this,T);this.is_error=false;this.on("vasterror",function(Y,W,V,X){this.is_error=true});this.parse(U)}Q.prototype=j(Object.create(CustomObject),{parse:function(V){var T=this;var U={type:V.getAttribute("type"),src:V.textContent.trim(),creative:this.creative};this.is_vpaid=this.is_vpaid||(V.getAttribute("apiFramework")||"").toLowerCase()=="vpaid";if(this.is_vpaid){this.media=new P(U)}else{this.media=new g(U)}this.media.proxy(["vastevent","vasterror","vpaidevent","done","start"],T)},getIsSupport:function(){return this.media.getIsSupport()},show:function(U,W,T,V){this.media.show(U,W,T,V)}});function a(V,U){this.place=null;this.width;this.height;this.player_options={};this.vpaid_options={};j(this,U);this.width=this.width||this.place.offsetWidth;this.height=this.height||this.place.offsetHeight;this.id;this.skipoffset=null;this.sequence=1;this.is_vpaid=false;this.click_through=null;this.params={};this.tracking={};this.medias=[];this.is_ready=false;this.is_error=false;this.is_done=false;this.on("ready",function(){this.is_ready=true});this.on("vasterror",function(Z,X,W,Y){this.is_error=true;this.place.innerHTML="";this.trigger("error")});this.on("vastevent",function(Z,X,W,Y){switch(X){case"clickthru":if(!W.no_fire_pixel){d(W.click_through)}break;case"skip":case"complete":this.trigger("done");break}s(this.tracking[X])});this.on("start",function(W){T.trigger("linearstart",T)});this.on("done",function(){this.is_done=true});var T=this;setTimeout(function(){T.parse(V)},0)}a.prototype=j(Object.create(CustomObject),{parse:function(U){var T=this;this.id=U.getAttribute("id")||null;this.sequence=parseInt(U.getAttribute("sequence"))||1;this.is_vpaid=(U.getAttribute("apiFramework")||"").toLowerCase()=="vpaid";this.tracking=H(U.getElementsByTagName("TrackingEvents")[0]);if(ad_parameters_xml=U.getElementsByTagName("AdParameters")[0]){this.params.AdParameters=ad_parameters_xml.textContent.trim()}if(skipoffset_attr=U.getAttribute("skipoffset")){this.skipoffset=J(skipoffset_attr)}if(clicks_xml=U.getElementsByTagName("VideoClicks")[0]){if(through_xml=clicks_xml.getElementsByTagName("ClickThrough")[0]){this.click_through=through_xml.textContent.trim()}if(click_tracking_xml=U.getElementsByTagName("ClickTracking")[0]){this.tracking.clickthru=this.tracking.clickthru||[];this.tracking.clickthru.push({event:"clickthru",content:click_tracking_xml.textContent.trim()})}}y(U.getElementsByTagName("MediaFile"),function(V){var W=new Q(V,{is_vpaid:T.is_vpaid,creative:T});W.proxy(["vasterror","vastevent","start"],T);T.medias.push(W)});this.trigger("ready")},show:function(){var T=this;if(this.medias.length){for(var U=0;U<this.medias.length;U++){var W=this.medias[U];if(W.getIsSupport()){this.media=W;break}}if(this.media){var V=A('<div style="position:absolute; width:100%; height:100%; top:0; background:black"></div>');T.place.appendChild(V);this.on("done",function(){T.place.removeChild(V)});if(this.media.is_vpaid){this.media.show(V,T.width,T.height,T.vpaid_options)}else{this.media.show(V,T.width,T.height,T.player_options)}}else{this.trigger("vasterror",403,"Couldn't find MediaFile that is supported by this video player, based on the attributes of the MediaFile element.",this)}}else{this.trigger("vasterror",400,"General Linear error. Video player is unable to display the Linear Ad.",this)}},play:function(){this.media.media.player.play()},pause:function(){this.media.media.player.pause()},skip:function(){this.trigger("vastevent","skip",{},this)},clickthru:function(T){this.trigger("vastevent","clickthru",{click_through:T},this)},setVolume:function(T){this.media.media.player.setVolume(T)},mute:function(){this.media.media.player.mute()},unmute:function(){this.media.media.player.unmute()}});function k(T){this.place;this.elm;this.width;this.height;this.is_vpaid=false;this.min_duration;this.resource;this.click_through;this.tracking=[];this.can_show=false;this.is_error=false;this.on("vasterror",function(X,V,U,W){this.is_error=true});this.on("vastevent",function(X,V,U,W){if(V=="clickthru"){d(U.click_through)}s(this.tracking[V])});this.parse(T)}k.prototype=j(Object.create(CustomObject),{parse:function(T){this.is_vpaid=(T.getAttribute("apiFramework")||"").toLowerCase()=="vpaid";this.width=T.getAttribute("width")||0;this.height=T.getAttribute("height")||0;this.tracking=H(T.getElementsByTagName("TrackingEvents")[0]);if(min_duration=T.getAttribute("minSuggestedDuration")){if(m=/^(\d{1,2}):(\d{1,2}):(\d{1,2})/.exec(min_duration)){this.min_duration=parseInt(m[1])*3600+parseInt(m[2])*60+parseInt(m[3])}}if(click_through_xml=T.getElementsByTagName("NonLinearClickThrough")[0]){this.click_through=click_through_xml.textContent}if(click_tracking_xml=T.getElementsByTagName("NonLinearClickTracking")[0]){this.tracking.clickthru=this.tracking.clickthru||[];this.tracking.clickthru.push({event:"clickthru",content:click_tracking_xml.textContent})}if(!this.resource&&(static_xml=T.getElementsByTagName("StaticResource")[0])){var U=static_xml.getAttribute("creativeType");if(this.supportMedia(U)){this.resource={type:U,src:static_xml.textContent.trim()}}}if(!this.resource&&(iframe_xml=T.getElementsByTagName("IFrameResource")[0])){this.resource={type:"iframe",src:iframe_xml.textContent.trim()}}if(!this.resource&&(html_xml=T.getElementsByTagName("HTMLResource")[0])){this.resource={type:"html",src:html_xml.textContent.trim()}}this.can_show=!!this.resource},show:function(U){var W=this;this.place=U;this.elm=A('<div class="nonlinear"><div class="close">x</div><div class="inner"></div></div>');var X=this.elm.getElementsByClassName("close")[0];var V=this.elm.getElementsByClassName("inner")[0];this.elm.style.width=this.width+"px";this.elm.style.height=this.height+"px";this.elm.style.right="10px";this.elm.style.bottom="70px";var T=v(this.resource.type,this.resource.src);V.appendChild(T);if(this.click_through){D(this.elm,"click",function(){W.trigger("vastevent","clickthru",{click_through:W.click_through},W)})}if(this.min_duration){X.style.display="none";setTimeout(function(){X.style.display=""},this.min_duration*1000)}D(X,"click",function(){W.close();return false});this.place.appendChild(this.elm);this.trigger("vastevent","creativeView",{},this)},close:function(){this.trigger("vastevent","collapse",{},this);this.trigger("vastevent","close",{},this);this.place.removeChild(this.elm)},supportMedia:function(T){return T!="application/x-shockwave-flash"||q()}});function x(V,U){this.place=null;j(this,U);this.sequence;this.required;this.banners=[];this.is_ready=false;this.is_error=false;this.on("ready",function(){this.is_ready=true});this.on("vasterror",function(Z,X,W,Y){this.is_error=true});var T=this;setTimeout(function(){T.parse(V)},0)}x.prototype=j(Object.create(CustomObject),{parse:function(U){var T=this;this.sequence=parseInt(U.getAttribute("sequence"))||1;y(U.getElementsByTagName("NonLinear"),function(V){var W=new k(V);W.proxy(["vasterror","vastevent"],T);T.banners.push(W)});this.trigger("ready")},show:function(){var U=this;if(this.banners.length==0){U.trigger("vasterror",500,"General NonLinearAds error",U);return}var T=0;(function(){var V=arguments.callee;if(banner=U.banners[T]){if(banner.can_show){banner.on("close",function(){T++;V()});banner.show(U.place)}else{U.trigger("vasterror",503,"Couldnâ€™t find NonLinear resource with supported type.",U);T++;V()}}else{}})()}});function r(T){this.place;this.width;this.height;this.resource;this.click_through;this.tracking=[];this.is_error=false;this.on("vasterror",function(X,V,U,W){this.is_error=true});this.on("vastevent",function(X,V,U,W){if(V=="clickthru"){d(U.click_through)}s(this.tracking[V])});this.parse(T)}r.prototype=j(Object.create(CustomObject),{parse:function(T){this.width=T.getAttribute("width")||0;this.height=T.getAttribute("height")||0;this.tracking=H(T.getElementsByTagName("TrackingEvents")[0]);if(through_xml=T.getElementsByTagName("CompanionClickThrough")[0]){this.click_through=through_xml.textContent}if(click_tracking_xml=T.getElementsByTagName("CompanionClickTracking")[0]){this.tracking.clickthru=this.tracking.clickthru||[];this.tracking.clickthru.push({event:"clickthru",content:click_tracking_xml.textContent})}if(!this.resource&&(static_xml=T.getElementsByTagName("StaticResource")[0])){var U=static_xml.getAttribute("creativeType");if(this.supportMedia(U)){this.resource={type:U,src:static_xml.textContent.trim()}}}if(!this.resource&&(iframe_xml=T.getElementsByTagName("IFrameResource")[0])){this.resource={type:"iframe",src:iframe_xml.textContent.trim()}}if(!this.resource&&(html_xml=T.getElementsByTagName("HTMLResource")[0])){this.resource={type:"html",src:html_xml.textContent.trim()}}if(this.resource&&(ad_slot_id=T.getAttribute("adSlotID"))){if(custom_place=document.getElementById(ad_slot_id)){if(this.width==custom_place.offsetWidth&&this.height==custom_place.offsetHeight){this.place=custom_place}}}},show:function(){var T=this;var U=v(this.resource.type,this.resource.src);U.width=this.width;U.height=this.height;if(this.click_through){U.style.cursor="pointer";D(U,"click",function(){T.trigger("vastevent","clickthru",{click_through:T.click_through},T)})}this.place.innerHTML="";this.place.appendChild(U);T.trigger("vastevent","creativeView",{},this)},supportMedia:function(T){return T!="application/x-shockwave-flash"||q()}});function R(V,U){this.places=[];j(this,U);this.sequence;this.required;this.banners=[];this.is_ready=false;this.is_error=false;this.on("ready",function(){this.is_ready=true});this.on("vasterror",function(Z,X,W,Y){this.is_error=true});var T=this;setTimeout(function(){T.parse(V)},0)}R.prototype=j(Object.create(CustomObject),{parse:function(U){var T=this;this.sequence=parseInt(U.getAttribute("sequence"))||1;this.required=U.getAttribute("required")||"any";if(this.required!="none"){y(U.getElementsByTagName("Companion"),function(V){var W=new r(V);W.proxy(["vasterror","vastevent"],T);T.banners.push(W)})}this.trigger("ready")},show:function(){var T=this;if(this.required!="none"){var U=[];var V=[];y(this.places,function(W){if(elm=document.getElementById(W.id)){U.push(W.width+"x"+W.height);V.push(elm)}});y(this.banners,function(W){if(W.place){if((i=V.indexOf(W.place))>-1){U[i]=null}}else{if((i=U.indexOf(W.width+"x"+W.height))>-1){U[i]=null;W.place=V[i]}}if(W.place){W.show()}else{T.trigger("vasterror",601,"Unable to display Companion because creative dimensions do not fit within Companion display area (i.e., no available space).",W);if(T.required=="all"){T.trigger("vasterror",602,"Unable to display Required Companion",T);return false}}})}}});function S(V,U){this.linear_options={};this.nonlinear_options={};this.companion_options={};j(this,U);this.type;this.creative;this.tracking={};this.is_ready=false;this.is_error=false;this.is_linear_done=false;this.on("ready",function(){this.is_ready=true});this.on("vasterror",function(Z,X,W,Y){this.is_error=true});this.on("vastevent",function(Z,X,W,Y){s(this.tracking[X])});this.on("lineardone",function(){this.is_linear_done=true});var T=this;setTimeout(function(){T.parse(V)},0)}S.prototype=j(Object.create(CustomObject),{parse:function(U){var T=this;this.id=U.getAttribute("id")||null;this.tracking=H(creatives_xml.getElementsByTagName("TrackingEvents")[0]);if(linear_xml=U.getElementsByTagName("Linear")[0]){this.type="linear";this.creative=new a(linear_xml,this.linear_options);this.creative.on(["done","error"],function(){setTimeout(function(){T.trigger("lineardone")},0)})}else{if(nonlinear_xml=U.getElementsByTagName("NonLinearAds")[0]){this.type="nonlinear";this.creative=new x(nonlinear_xml,this.nonlinear_options)}else{if(companion_xml=U.getElementsByTagName("CompanionAds")[0]){this.type="companion";this.creative=new R(companion_xml,this.companion_options)}else{this.trigger("vasterror",0,"",this);return}}}this.creative.proxy(["ready","vasterror","vastevent","linearstart"],T)},show:function(){var T=this;switch(this.type){case"linear":this.creative.show();break;case"nonlinear":this.creative.show();break;case"companion":this.creative.show();break}}});function F(V,U){this.linear_options={};this.nonlinear_options={};this.companion_options={};j(this,U);this.error_url;this.impression_url;this.tracking={};this.creatives=[];this.linear=[];this.nonlinear=[];this.companion=[];this.is_ready=false;this.is_error=false;this.is_linear_done=false;this.on("ready",function(){this.is_ready=true});this.on("error",function(){this.is_error=true});this.on("lineardone",function(){this.is_linear_done=true});var T=this;setTimeout(function(){T.parse(V)},0)}F.prototype=j(Object.create(CustomObject),{parse:function(V){var T=this;if(error_xml=V.getElementsByTagName("Error")[0]){this.error_url=error_xml.textContent.trim()}if(impression_xml=V.getElementsByTagName("Impression")[0]){this.impression_url=impression_xml.textContent.trim()}if(creatives_xml=V.getElementsByTagName("Creatives")[0]){var U={linear_options:T.linear_options,nonlinear_options:T.nonlinear_options,companion_options:T.companion_options};y(creatives_xml.getElementsByTagName("Creative"),function(X){var W=new S(X,U);T.creatives.push(W);W.on("ready",function(){if(W.type=="linear"){T.linear.push(W)}if(W.type=="nonlinear"){T.nonlinear.push(W)}if(W.type=="companion"){T.companion.push(W)}if(E(T.creatives,function(Y){return Y.is_ready||Y.is_error})){T.trigger("ready")}});W.proxy(["vasterror","vastevent","linearstart"],T)});this.linear.sort(function(X,W){return X.sequence-W.sequence});this.nonlinear.sort(function(X,W){return X.sequence-W.sequence});this.companion.sort(function(X,W){return X.sequence-W.sequence})}},start:function(){var T=this;this.on("lineardone",function(){T.startNonLinear()});this.startCompanion();this.startLinear()},startLinear:function(){var U=this;var T=0;(function(){var V=arguments.callee;if(creative=U.linear[T]){creative.on("lineardone",function(){T++;V()});creative.show()}else{U.trigger("lineardone")}})()},startNonLinear:function(){y(this.nonlinear,function(T){T.show()})},startCompanion:function(){y(this.companion,function(T){T.show()})}});function p(V,U){this.linear_options={};this.nonlinear_options={};this.companion_options={};j(this,U);this.vast;this.on("ready",function(){this.is_ready=true});this.on("error",function(){this.is_error=true});this.on("lineardone",function(){this.is_linear_done=true});var T=this;setTimeout(function(){T.parse(V)},0)}p.prototype=j(Object.create(CustomObject),{parse:function(V){var T=this;var U=V.getElementsByTagName("VASTAdTagURI")[0].textContent;this.vast=new N(U,{linear_options:this.linear_options,nonlinear_options:this.nonlinear_options,companion_options:this.companion_options});this.vast.proxy(["ready","error","lineardone","vasterror","vastevent","linearstart"],T)},start:function(){this.vast.start()},startLinear:function(){this.vast.startLinear()},startCompanion:function(){this.vast.startCompanion()},startNonLinear:function(){this.vast.startNonLinear()}});function I(V,U){this.linear_options={};this.nonlinear_options={};this.companion_options={};j(this,U);this.id;this.sequence;this.is_ready=false;this.is_error=false;this.is_linear_done=false;this.is_wrapper=false;this.on("ready",function(){this.is_ready=true});this.on("error",function(){this.is_error=true});this.on("lineardone",function(){this.is_linear_done=true});var T=this;setTimeout(function(){T.parse(V)},0)}I.prototype=j(Object.create(CustomObject),{parse:function(V){var T=this;this.id=V.getAttribute("id")||null;this.sequence=parseInt(V.getAttribute("sequence"))||1;var U={linear_options:T.linear_options,nonlinear_options:T.nonlinear_options,companion_options:T.companion_options};if(wrapper_xml=V.getElementsByTagName("Wrapper")[0]){this.inline=new p(wrapper_xml,U)}else{if(inline_xml=V.getElementsByTagName("InLine")[0]){this.inline=new F(inline_xml,U)}else{this.trigger("error")}}this.inline.proxy(["ready","linearstart","lineardone","error","vastevent","vasterror"],T)},start:function(){this.inline.start()},startLinear:function(){this.inline.startLinear()},startCompanion:function(){this.inline.startCompanion()},startNonLinear:function(){this.inline.startNonLinear()}});function N(V,U){var T=this;this.timeout=5000;this.linear_options={player_options:{},vpaid_options:{timeout:10000}};this.nonlinear_options={};this.companion_options={};j(this,U);this.url=V;this.ads=[];this.is_ready=false;this.is_error=false;this.is_linear_done=false;this.load(V);this.on("ready",function(){this.is_ready=true});this.on("error",function(){this.is_error=true});this.on("lineardone",function(){this.is_linear_done=true})}N.prototype=j(Object.create(CustomObject),{load:function(U){var T=this;var W=null;var V=setTimeout(function(){T.trigger("error",301,"Timeout of VAST URI provided in Wrapper element");W.abort()},this.timeout);W=K(U,function(Y,X){clearTimeout(V);if(Y){if(!X.responseXML||!X.responseXML.documentElement){T.trigger("error",100,"XML parsing error");return}y(X.responseXML.documentElement.getElementsByTagName("Ad"),function(Z){var aa=new I(Z,{linear_options:T.linear_options,nonlinear_options:T.nonlinear_options,companion_options:T.companion_options});aa.on("ready",function(){if(E(T.ads,function(ab){return ab.is_ready||ab.is_error})){T.trigger("ready")}});aa.proxy(["linearstart","vastevent","vasterror","error"],T);T.ads.push(aa)});if(T.ads.length){T.ads.sort(function(aa,Z){return aa.sequence-Z.sequence})}else{T.trigger("error")}}else{T.trigger("error")}})},start:function(){var T=this;this.on("lineardone",function(){T.startNonLinear()});this.startCompanion();this.startLinear()},startLinear:function(){var U=this;var T=0;(function(){var V=arguments.callee;if(ad=U.ads[T]){ad.on("lineardone",function(){T++;V()});ad.startLinear()}else{if(!U.is_linear_done){U.trigger("lineardone")}}})()},startCompanion:function(){y(this.ads,function(T){T.startCompanion()})},startNonLinear:function(){y(this.ads,function(T){T.startNonLinear()})}});function b(T){this.creative=null;j(this,T);this.player=this.creative.media.media.player;this.dom=A('<div class="ad_controls_place"><div class="ad-info"><span><span class="ad-link">Visit advertiser\'s site</span><span style="margin:0 10px">&bull;</span></span><span class="timer"></span></div><div class="ad-skip"><div class="message"></div></div><div class="controls"><div class="progress readonly"><div class="load"></div><div class="play"></div></div><div class="play-pause"><svg><path class="play" transform="translate(-24, 0)" d="M26,0v24l20-12L26,0L26,0z"/><path class="pause" transform="translate(0, 0)" d="M3.5,0h7v24h-7V0z M13.5,0h7v24h-7V0z"/></svg></div><div class="tray"><div class="mute"><svg><g class="unmute" transform="translate(-48, 0)"><path d="M64.7,2.1L56.3,7h-5.8C49.7,7,49,7.7,49,8.5v7c0,0.8,0.7,1.5,1.5,1.5h5.8l8.4,4.9c1,0.6,2.3-0.1,2.3-1.3V3.4C67,2.3,65.7,1.6,64.7,2.1z"/><path d="M70.4,6.8c-0.1-0.5-0.7-0.9-1.2-0.8c-0.5,0.1-0.9,0.7-0.8,1.2C68.8,8.8,69,10.4,69,12s-0.2,3.2-0.5,4.7c-0.1,0.5,0.2,1.1,0.8,1.2c0.1,0,0.1,0,0.2,0c0.5,0,0.9-0.3,1-0.8c0.4-1.7,0.6-3.4,0.6-5.2S70.8,8.5,70.4,6.8z"/></g><path class="mute" transform="translate(-72, 0)" d="M73,15.5v-7C73,7.7,73.7,7,74.5,7h5.8l8.4-4.9c0.7-0.4,1.5-0.2,1.9,0.4L76.2,17h-1.7C73.7,17,73,16.3,73,15.5z M93.2,6.1c-0.5,0.1-0.9,0.7-0.8,1.2C92.8,8.8,93,10.4,93,12s-0.2,3.2-0.5,4.7c-0.1,0.5,0.2,1.1,0.8,1.2c0.1,0,0.1,0,0.2,0c0.5,0,0.9-0.3,1-0.8c0.4-1.7,0.6-3.4,0.6-5.2s-0.2-3.5-0.6-5.2C94.3,6.3,93.8,6,93.2,6.1z M81.3,17.6l7.5,4.3c1,0.6,2.3-0.1,2.3-1.3V7.8L81.3,17.6z M74.7,22.7l20-20c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-20,20c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3S74.5,22.9,74.7,22.7z"/></svg></div><div class="volume"><div class="level"></div></div></div></div></div>');this.init()}b.prototype=j(Object.create(CustomObject),{init:function(){this.initView();this.initEvents();this.initVolume();this.initAdControls()},getElement:function(){return this.dom},initView:function(){this.dom.style.position="absolute";this.dom.style.left=0;this.dom.style.right=0;this.dom.style.bottom=0;this.dom.style.top=0},initAdControls:function(){var aa=this;var W=this.creative;var Z=this.player;var U=this.dom.getElementsByClassName("ad-info")[0];var T=U.getElementsByClassName("timer")[0];var Y=this.dom.getElementsByClassName("ad-skip")[0];var X=U.firstChild;Z.on("timeupdate",function(ac,ae){T.innerHTML="Ad. "+aa.formatTime(Z.getDuration()-ae)});if(W.click_through){D(X,"click",function(){W.trigger("vastevent","clickthru",{click_through:W.click_through},W)})}else{X.style.display="none"}if(W.skipoffset){var V=null;if(W.skipoffset.type=="seconds"){V=W.skipoffset.value}if(W.skipoffset.type=="percent"){V=Z.getDuration()/100*W.skipoffset.value}if(V){var ab=Y.getElementsByClassName("message")[0];Z.on("timeupdate",function(ac,ae){if(ae>V){ac.handler.remove();ab.innerHTML="Skip to video";D(Y,"mouseup",function(af){W.trigger("vastevent","skip",{},W);return false})}else{ab.innerHTML="You can skip<br>to video<br>in "+parseInt(V-ae)}})}}else{Y.style.display="none"}},initEvents:function(){var T=this;var W=this.dom.getElementsByClassName("play-pause")[0];var U=this.dom.getElementsByClassName("progress")[0];var V="play";this.player.on(["play","resume"],function(){V="play";n(T.dom,"paused");u(T.dom,"playing");T.delayHide()});this.player.on("pause",function(){V="pause";u(T.dom,"paused");n(T.dom,"playing");T.show()});this.player.on("timeupdate",function(X,Z){var Y=U.getElementsByClassName("play")[0];Y.style.width=(Z/this.getDuration()*100)+"%"});D(this.dom,"click",function(X){if(X.target==T.dom){T.trigger(V=="play"?"pause":"play")}});D(W,"click",function(X){T.trigger(V=="play"?"pause":"play")});D(this.dom,"mousemove",function(X){T.show();T.delayHide()})},initVolume:function(){var T=this;var V=this.dom.getElementsByClassName("volume")[0];var W=V.getElementsByClassName("level")[0];var U=this.dom.getElementsByClassName("mute")[0];W.style.width="100%";D(V,"mousedown",function(X){if(X.which==1){var Y=V.getBoundingClientRect().left;T.trigger("volumechange",(X.pageX-Y)/V.offsetWidth);D(document,"mousemove.volume",function(Z){u(V,"no-animate");T.trigger("volumechange",Math.max(0,Math.min(1,(Z.pageX-Y)/V.offsetWidth)))});D(document,"mouseup.volume",function(Z){n(V,"no-animate");M(document,["mousemove.volume","mouseup.volume"])})}});this.player.on("volumechange",function(X,Y){W.style.width=Y*100+"%"})},formatTime:function(W){var V=this.player.getDuration()>=3600;var X=W|0;var T=(X/3600)|0;X-=T*3600;var U=(X/60)|0;X-=U*60;return(V?("0"+T).substr(-2)+":":"")+("0"+U).substr(-2)+":"+("0"+X).substr(-2)},show:function(){clearTimeout(this._t);this.dom.style.cursor="";u(this.dom,"show");n(this.dom,"hide")},delayHide:function(){var T=this;clearTimeout(this._t);this._t=setTimeout(function(){T.hide()},2000)},hide:function(){this.dom.style.cursor="none";u(this.dom,"hide");n(this.dom,"show")}});function t(T){var V=new b({creative:T});var U=T.media.media.player;V.on(["play","pause"],function(W){U[W.type]()});V.on("volumechange",function(X,W){U.setVolume(W)});T.place.appendChild(V.getElement())}function e(){this.slot=null;this.iframe=null;this.vast=null;this.tags=[];this.tracking=[];this.vpaid_timeout=5;this.flash_swf="video.swf";this.vpaid_flash_bridge="vpaid_bridge.swf"}e.prototype={_handlers:{},trigger:function(T){console.log("TRIGGER",T);if(typeof this._handlers[T]!=="undefined"){for(var U=0;U<this._handlers[T].length;U++){var V=this._handlers[T][U];V.handler.apply(V.scope,arguments)}}},buildVAST:function(T){var U=this;var V=new N(T.tag,{linear_options:{place:this.slot,width:this.width,height:this.height,player_options:{flash_swf:this.flash_swf},vpaid_options:{timeout:this.vpaid_timeout*1000,vpaid_flash_bridge:this.vpaid_flash_bridge}}});V.on("*",function(W){console.log(">>>",W.type)});V.on("vasterror",function(Y,W,Z,X){console.log("vasterror",W,Z)});V.on("vastevent",function(Z,X,W,Y){console.log(X,W,Y);y(U.tracking,function(aa){if(aa.event==X||aa.event=="*"){l(aa.pixel,{AD:T.id,EVENT:X,SITE:document.referrer,FLASH:""})}})});V.on("linearstart",function(X,W){if(!W.is_vpaid){t(W)}});return V},handshakeVersion:function(T){return"2.0"},initAd:function(U,aa,V,W,X,Z){var ab=this;this.width=U;this.height=aa;if(X.AdParameters){try{var T=JSON.parse(X.AdParameters);this.tags=T.ads;this.tracking=T.tracking;this.vpaid_timeout=T.timeout||this.vpaid_timeout;this.flash_swf=T.video_swf||this.flash_swf;this.vpaid_flash_bridge=T.vpaid_bridge_swf||this.vpaid_flash_bridge;if(Z.slot){this.slot=Z.slot;document.body.setAttribute("style","margin:0; padding:0");this.trigger("AdLoaded");return}}catch(Y){console.error(Y.message)}}this.trigger("AdError")},startAd:function(){var U=this;var T=0;var V=false;(function(){var W=arguments.callee;if(tag=U.tags[T]){U.current_vast=U.buildVAST(tag);U.current_vast.on("ready",function(){if(!V){V=true;U.trigger("AdStarted")}this.startLinear()});U.current_vast.on(["lineardone","error"],function(){T++;W()})}else{U.trigger("AdStopped")}})()},getAdDuration:function(){},getAdLinear:function(){return true},stopAd:function(U,T){},setAdVolume:function(T){},getAdVolume:function(){},resizeAd:function(V,T,U){},pauseAd:function(){},resumeAd:function(){},expandAd:function(){},getAdExpanded:function(){},getAdSkippableState:function(){},collapseAd:function(){},skipAd:function(){},subscribe:function(T,U,V){this._handlers[U]=this._handlers[U]||[];this._handlers[U].push({handler:T,scope:V})},unsubscribe:function(T){this._handlers[T]=[]}};return new e};