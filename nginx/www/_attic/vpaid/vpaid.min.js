window.getVPAIDAd=function(){(function(){var U=document.createElement("STYLE");U.innerHTML='.ad_controls_place {position: relative;outline: none;z-index: 0;font: 400 14px/1.2 \'Roboto\', sans-serif;overflow: hidden;}.ad_controls_place:-webkit-full-screen{position: absolute;top: 0;left: 0;width: 100% !important;height: 100% !important;}.ad_controls_place:-moz-full-screen{top: 0;left: 0;position: absolute;width: 100% !important;height: 100% !important;}.ad_controls_place .no-animate,.ad_controls_place .no-animate *{transition: none !important;}.ad_controls_place .error.fatal {position: absolute;top: 45%;width: 100%;color: rgb(255, 82, 82);font-size: 20pt;text-align: center;}.ad_controls_place .loader {position: absolute;left: 0;right: 0;top: 0;bottom: 0;background: rgba(0, 0, 0, 0.7);z-index: -1;opacity: 0;transition: opacity ease .3s;}.ad_controls_place.wait .loader {opacity: 1;z-index: 10;}.ad_controls_place * {padding: 0;margin: 0;box-sizing: border-box;}.ad_controls_place > .screen {width: 100%;height: 100%;top: 0;position: absolute;background: black;z-index: 0;}.ad_controls_place .poster {position: absolute;left: 0;top: 0;width: 100%;height: 100%;background-repeat: no-repeat;background-position: 50% 50%;background-size: contain;background-color: black;cursor: pointer;z-index: 10;}.ad_controls_place .poster svg {position: absolute;width: 160px;height: 160px;left: 50%;top: 50%;margin: -80px 0 0 -80px;}.ad_controls_place .poster:hover svg > path {fill: rgba(255,255,255,0.9);}.Ad {position: absolute;left: 0;top: 0;width: 100%;height: 100%;z-index: 1000;background: #000;outline: none;}.ad_controls_place .non-linear-ads {position: absolute;right: 10px;bottom: 60px;cursor: pointer;transition: opacity ease 1s;}.ad_controls_place .non-linear-ads .close {position: absolute;right: 0px;top: 0px;border: 1px solid #444;background: #fff;text-align: center;width: 20px;height: 20px;cursor: pointer;}.ad_controls_place>.controls {position: absolute;left: 0px;right: 0px;bottom: 0px;height: 69px;background: none;background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAABFCAYAAACL3IzzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjBCQUNBRUVFNjM5QjExRTVBQjkzRDJCRDQyRkU1MEE0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjBCQUNBRUVGNjM5QjExRTVBQjkzRDJCRDQyRkU1MEE0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MEJBQ0FFRUM2MzlCMTFFNUFCOTNEMkJENDJGRTUwQTQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MEJBQ0FFRUQ2MzlCMTFFNUFCOTNEMkJENDJGRTUwQTQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4PyzKNAAAAbElEQVR42myPUQ6AMAhDK9u1jB/e/0xV6NaQ6M/SBy0w3NcZAfAIEBEECvNJJLaqGjGMw4lUSgzjVlVLxAdnjk9lM9+aUKrmcWqvVI+5oZgbZeH0yo4yr/vWvIZ90TpIX9Xh8NCfmxfK/AgwACr2StbF5TFoAAAAAElFTkSuQmCC\');z-index: 9;opacity: 1;transition: opacity ease .3s;}.hide > .controls {opacity: 0;}.ad_controls_place>.controls svg {fill: #FFFFFF;}.ad_controls_place>.controls svg:hover {fill: #FCC010;}.ad_controls_place>.controls .play-pause {position: absolute;left: 20px;bottom: 10px;cursor: pointer;width: 24px;height: 24px;overflow: hidden;}.ad_controls_place>.controls .play-pause path.play {display: block;}.ad_controls_place>.controls .play-pause path.pause {display: none;}.ad_controls_place.playing>.controls .play-pause path.play {display: none;}.ad_controls_place.playing>.controls .play-pause path.pause {display: block;}.ad_controls_place>.controls .timer {position: absolute;bottom: 12px;left: 50px;color: #fff;font-size: 12px;padding: 0;line-height: 20px;height: 20px;vertical-align: middle;}.ad_controls_place>.controls .time-label {position: absolute;color: #fff;background: #000;border-radius: 5px;padding: 5px 10px;text-align: center;width: 70px;bottom: 60px;margin-left: -35px;opacity: 0;cursor: default;transition: opacity ease .5s;}.ad_controls_place>.controls .time-label:after {content: "";position: absolute;width: 0;height: 0;top: 100%;left: 50%;border-style: solid;border-color: transparent;border-width: 5px;border-top-color: #000;margin-left: -5px;}.ad_controls_place>.controls .time-label.show {opacity: 1;}.ad_controls_place>.controls .progress {position: absolute;left: 0px;right: 0px;bottom: 45px;height: 17px;background: none;cursor: pointer;border-bottom: 5px solid rgba(108, 108, 108, 0.5);z-index: 0;}.ad_controls_place>.controls .progress.readonly {border-bottom-width: 2px;cursor: default;}.ad_controls_place>.controls .progress .load {position: absolute;height: 5px;left: 0;bottom: -5px;background: rgba(154, 154, 156, 0.5);z-index: 0;transition: width ease .3s;}.ad_controls_place>.controls .progress.readonly .load {height: 2px;bottom: -2px;}.ad_controls_place>.controls .progress .play {position: absolute;left: 0;bottom: -5px;height: 5px;background: #FCC010;z-index: 10;transition: width ease .3s;}.ad_controls_place>.controls .progress.readonly .play {background: #BEBEBE;height: 2px;bottom: -2px;}.ad_controls_place>.controls .progress.readonly .play:after {display: none;}.ad_controls_place>.controls .progress .play:after {content: "";position: absolute;right: 0px;top: 0px;background: inherit;border-radius: 50%;width: 0px;height: 0px;border: none;margin: 3px 0 0 0;transition:margin ease .3s,width ease .3s,height ease .3s;}.ad_controls_place>.controls .progress:hover .play:after {width: 12px;height: 12px;margin: -3px -6px 0 0;}.ad_controls_place>.controls .tray {position: absolute;bottom: 10px;right: 20px;height: 24px;white-space: nowrap;}.ad_controls_place>.controls .tray > *{position: relative;width: 24px;height: 24px;overflow: hidden;margin: 0 0 0 15px;display: inline-block;cursor: pointer;vertical-align: middle;}.ad_controls_place>.controls .mute {cursor: default !important;}.ad_controls_place>.controls .mute svg {fill: #fff !important;}.ad_controls_place>.controls .mute svg .mute {display: none;}.ad_controls_place.muted>.controls .mute svg .unmute {display: none;}.ad_controls_place.muted>.controls .mute svg .mute {display: block;}.ad_controls_place>.controls .volume {position: relative;width: 100px;height: 5px;background: #6C6C6C;margin-top: -1px;margin-left: 5px;overflow: visible;}.ad_controls_place>.controls .volume .level{position: absolute;left: 0;height: 100%;background: #FFFFFF;transition: width ease .3s;}.ad_controls_place>.controls .volume .level:after {content: "";position: absolute;right: 0px;top: 0px;background: inherit;border-radius: 50%;width: 0px;height: 0px;border: none;margin: 3px 0 0 0;transition:margin ease .3s,width ease .3s,height ease .3s;}.ad_controls_place>.controls .volume:hover .level:after {width: 12px;height: 12px;margin: -3px -6px 0 0;}.ad_controls_place.fullscreen .tray .fullscreen .off { display: block; }.ad_controls_place.fullscreen .tray .fullscreen .on { display: none; }.ad_controls_place .tray .fullscreen .off { display: none; }.ad_controls_place .tray .fullscreen .on { display: block; }.ad_controls_place .tray .hq {width: 32px;}.ad_controls_place .ad-info {position: absolute;right: 5px;vertical-align: middle;top: 10px;color: #fff;font-size: 13pt;z-index: 10;background: rgba(0,0,0,0.5);padding: 5px 10px;}.ad_controls_place .ad-info .ad-link{color: #fff;border-bottom: 1px dashed #fff;text-decoration: none;cursor: pointer;}.ad_controls_place .ad-skip {position: absolute;display: table;right: 5px;bottom: 70px;padding: 5px;background: rgba(0,0,0,0.4);cursor: pointer;z-index: 10;}.ad_controls_place .ad-skip  > .message {display: table-cell;color: #fff;vertical-align: middle;text-align: center;font-size: 12pt;padding-right: 10px;}.ad_controls_place .ad-skip > img {display: table-cell;height: 60px;}';document.head.appendChild(U)})();function v(V,W){var U=new RegExp("(^|\\s)"+W+"(\\s|$)","g");if(U.test(V.className)){return}V.className=(V.className+" "+W).replace(/\s+/g," ").replace(/(^ | $)/g,"")}function o(V,W){var U=new RegExp("(^|\\s)"+W+"(\\s|$)","g");V.className=V.className.replace(U,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"")}function M(V,W){var U=new RegExp("(^|\\s)"+W+"(\\s|$)","g");return U.test(V.className)}function z(W,V){if(W){for(var U=0;U<W.length;U++){if(V(W[U])===false){break}}}}function x(W){var V=[];for(var U in W){if(W.hasOwnProperty(U)){V.push(U)}}return V}function H(U){return typeof U==="object"&&U!==null&&U.constructor===Object}function A(U){return U?(H(U)?x(U).length==0:U.length==0):true}function p(V,U){z(x(U),function(W){if(H(V[W])&&H(U[W])&&!A(V[W])){p(V[W],U[W])}else{if(typeof V[W]!=="undefined"){V[W]=U[W]}}});return V}function k(V,U){z(x(U),function(W){if(H(V[W])&&H(U[W])&&!A(V[W])){k(V[W],U[W])}else{V[W]=U[W]}});return V}function F(W,V){for(var U=0;U<W.length;U++){if(!V(W[U])){return false}}return true}function E(ab,Z,Y,X){if(Z instanceof Array){for(var V=0;V<Z.length;V++){E(ab,Z[V],Y,X)}}else{var aa=Z.split(".")[0];var U=Z.split(".")[1]||null;var W=function(ac){if(Y.call(X?X:ab,ac)===false){ac.stopPropagation();ac.preventDefault()}};if(!ab.__events){ab.__events={}}ab.__events=ab.__events||{};ab.__events[aa]=ab.__events[aa]||[];ab.__events[aa].push({tag:U,handler:W});ab.addEventListener(aa,W,false)}}function N(Z,X){if(X instanceof Array){for(var W=0;W<X.length;W++){N(Z,X[W])}}else{var Y=X.split(".")[0];var U=X.split(".")[1]||null;var V=Z.__events[Y];for(var W=0;W<V.length;W++){if(V[W]&&(U===null||V[W].tag==U)){Z.removeEventListener(Y,V[W].handler,false);V[W]=null}}}}function B(U){var V=document.createElement("DIV");V.innerHTML=U;return V.firstChild}function r(){var U=navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin.description;return !!U}function c(W,U){var V={};z(document.cookie.split(";"),function(X){var Y=X.split("=");if(Y.length==2){V[Y[0].trim()]=Y[1].trim()}});return V[W]&&!isNaN(V[W])?V[W]:U}function g(U,V){document.cookie=U+"="+V+"; path=/"}function L(V,X){var U=this;var W=new XMLHttpRequest();W.onreadystatechange=function(){if(W.readyState==4){X(W.status==200,W)}};W.open("GET",V,true);W.send(null);return W}function d(){var U,V={};if(U=navigator.userAgent.match(/\bandroid\s(\d+)\.(\d+)\.(\d+)\b/i)){V.is_android=true;V.version=[U[1],U[2],U[3]]}else{if(/iPad/.test(navigator.platform)){V.is_ipad=true}}V.is_mobile=V.is_android||V.is_ipad;return V}CustomObject={proxy:function(V,W){if(V instanceof Array){for(var U=0;U<V.length;U++){this.proxy(V[U],W)}}else{this.on(V,function(){var X=Array.prototype.splice.call(arguments,1);W.trigger.apply(W,[V].concat(X))})}},on:function(Y,X,W){var U=this;this._handlers=this._handlers||{};if(Y instanceof Array){for(var V=0;V<Y.length;V++){this.on(Y[V],X,W)}}else{if(typeof this._handlers[Y]==="undefined"){this._handlers[Y]=[]}this._handlers[Y].push({_id:this._handlers[Y].length,handler:X,scope:W||this,remove:function(){U._handlers[Y][this._id]=null}})}return this},trigger:function(Y){this._handlers=this._handlers||{};var W=Array.prototype.splice.call(arguments,1);var U=(this._handlers[Y]||[]).concat(this._handlers["*"]||[]);for(var X=0;X<U.length;X++){if(h=U[X]){var V=h.handler.apply(h.scope,[{type:Y,handler:h}].concat(W));if(V===false){break}}}return this}};function D(U,W){var V=((new Date).getTime()/1000)|0;var W=k({CACHEBUSTER:V,CACHE_BUSTER:V,timestamp:V},W);z(x(W),function(X){U=U.replace("["+X+"]",encodeURIComponent(W[X]))});return U}function n(V,X){var U=new Image;var V=D(V,X);var W=V.indexOf("?")==-1?"?":"&";U.src=V}function e(U,V){window.open(D(U,V),"_blank")}function I(U){var V={};if(U){z(U.getElementsByTagName("Tracking"),function(W){var Y={};var X=W.getAttribute("event");if(typeof V[X]==="undefined"){V[X]=[]}Y.content=W.textContent;z(W.attributes,function(Z){Y[Z.name]=Z.value});V[X].push(Y)})}return V}function K(U){U=U.trim();if(match=/^(\d{1,2}):(\d{1,2}):(\d{1,2})/.exec(U)){return{type:"seconds",value:parseInt(match[1])*3600+parseInt(match[2])*60+parseInt(match[3])}}if(match=/^(\d{1,3})%$/.exec(U)){return{type:"percent",value:parseInt(match[1])}}}function w(U,V){if(U=="html"){elm=document.createElement("DIV");elm.innerHTML=V}else{if(U=="iframe"){elm=document.createElement("IFRAME");elm.src=V;elm.style.border="none";elm.scrolling="no"}else{if(U=="application/x-shockwave-flash"){elm=document.createElement("OBJECT");elm.setAttribute("type","application/x-shockwave-flash");elm.setAttribute("data",V)}else{elm=document.createElement("IMG");elm.src=V}}}return elm}function t(V){if(V&&V.length){for(var U=0;U<V.length;U++){n(V[U].content)}}}function Q(V){var U=this;this.type;this.src;this.creative;k(this,V);this.vpaid=null;this.on("vpaidevent",function(aa,Z,Y){switch(Z){case"AdLoaded":U.vpaid.startAd();break;case"AdClickThru":var X=Y[0];var W=Y[2];U.trigger("vastevent","clickthru",{click_through:X,no_fire_pixel:!W},U);break;case"AdSkipped":U.trigger("vastevent","skip",{},U);break;case"AdStopped":U.trigger("vastevent","complete",{},U);break;case"AdError":U.trigger("vasterror",901,Y);break;case"AdStarted":U.trigger("vastevent","start",{},U);U.trigger("vastevent","creativeView",{},U);break;case"AdVideoFirstQuartile":U.trigger("vastevent","firstQuartile",{},U);break;case"AdVideoMidpoint":U.trigger("vastevent","midpoint",{},U);break;case"AdVideoThirdQuartile":U.trigger("vastevent","thirdQuartile",{},U);break}})}Q.prototype=k(Object.create(CustomObject),{vpaidEventsList:["AdLoaded","AdSkipped","AdStarted","AdStopped","AdLinearChange","AdSkippableStateChange","AdSizeChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"],show:function(V,Z,U,X){var W=this;var Y=B('<iframe id="iframe" frameborder="no" scrolling="no" allowfullscreen></iframe>');Y.width=Z;Y.height=U;V.appendChild(Y);var aa=setTimeout(function(){W.trigger("vasterror",900,"Timeout VPAID AdLoaded event")},X.timeout);this.on("vpaidevent",function(ac,ab){if(ab=="AdLoaded"||ab=="AdStarted"||ab=="AdError"){clearTimeout(aa)}});if(this.type=="application/x-shockwave-flash"){this.showFlash(Y,Z,U,X)}else{this.showJS(Y,Z,U,X,Y)}},showFlash:function(W,U,ab,ae){var ac=this;var Z=W.contentDocument;var X=W.contentWindow;var aa="_custom_player_vpaid_on_ready"+Math.random().toString(16).split(".")[1];var Y="_custom_player_vpaid_on_error"+Math.random().toString(16).split(".")[1];var V=function(ag,af){var ah="_custom_player_vpaid_"+ag+Math.random().toString(16).split(".")[1];W.contentWindow[ah]=af;ac.vpaid.subscribe(ag,ah)};W.contentWindow[Y]=function(){ac.trigger("vpaidevent","AdError")};W.contentWindow[aa]=function(){ac.vpaid=W.contentWindow.vpaid;console.log("--VPAID version:",ac.vpaid.handshakeVersion("2.0"));console.log("getAdLinear:",ac.vpaid.getAdLinear());V("AdLoaded",function(){ac.vpaid.startAd()});z(ac.vpaidEventsList,function(af){V(af,function(ag){ac.trigger("vpaidevent",af,ag)})});ac.vpaid.initAd(U,ab,"normal",500,ac.creative.params,"")};Z.open();Z.write('<body style="padding:0; margin:0; width:100%; height:100%;"><object id="vpaid" type="application/x-shockwave-flash" width="100%" height="100%" data="'+ae.vpaid_flash_bridge+'"><param name="allowScriptAccess" value="always"></param><param name="allowNetworking" value="all"></param><param name="wmode" value="transparent"><param name="flashvars" value="onReady='+aa+"&onError="+Y+"&src="+encodeURIComponent(this.src)+'"></param></object></body>');Z.close();console.log(this)},showJS:function(Y,X,U,W){var V=this;Y.contentWindow.trigger_error=function(){V.trigger("vpaidevent","AdError","Can't load vpaid file")};Y.contentWindow.trigger_load=function(){var Z=Y.contentWindow.getVPAIDAd;if(typeof Z!=="function"){V.trigger("vasterror",901,"General VPAID error.",V.creative);return}V.vpaid=Z();z(V.vpaidEventsList,function(aa){V.vpaid.subscribe(function(){V.trigger("vpaidevent",aa,arguments)},aa)});V.vpaid.initAd(X,U,"normal",500,V.creative.params,{slot:Y.contentDocument.body})};Y.contentDocument.open();Y.contentDocument.write('<body style="margin:0; padding:0; width:100%; height:100%;"><script src="'+this.src+'" onload="trigger_load()" onerror="trigger_error()"><\/script></body>');Y.contentDocument.close()},getIsSupport:function(){var U=["application/javascript","application/x-javascript"];if(r()){U.push("application/x-shockwave-flash")}return U.indexOf(this.type)>-1}});function P(U,W){this.root=U;this.is_show_poster=false;this.is_loading=false;this.is_playing=false;this.is_muted=false;this.is_start_load=false;this.duration=null;this.sources=[];this._handlers={};this._plugins={};this.conf={baseCSSClass:"customPlayer",muted:false,autoplay:false,sources:[],plugins:{},defaultVolume:1,allow_backends:x(this.__backends),cookieKeyVolume:null,backend_options:{flash_swf:W.flash_swf||"video.swf",useDefaultControls:false}};p(this.conf,W);v(this.root,this.conf.baseCSSClass);if(this.conf.plugins){this._initPlugins(this.conf.plugins)}if(this.conf.sources){this.setSources(this.conf.sources)}var V=this;setTimeout(function(){V._init()},0)}P.prototype=k(Object.create(CustomObject),{__backends:{},__plugins:{},_init:function(){var U=this;if(this.conf.autoplay){U.play()}if(this.conf.cookieKeyVolume){this.setVolume(c(this.conf.cookieKeyVolume,this.conf.defaultVolume))}else{this.setVolume(this.conf.defaultVolume)}if(this.conf.muted){this.mute()}},_destroyBackend:function(){if(this.backend){this.backend.destroy();this.root.removeChild(this.backend.getElement())}},_initBackend:function(W){var U=this;this.trigger("waiting");if(!(this.backend instanceof W)){if(this.backend){this._destroyBackend()}this.backend=new W(this.conf.backend_options);this.backend.on("play",function(){U.is_playing=true});this.backend.on("pause",function(){U.is_playing=false});this.backend.on("ended",function(){U.is_playing=false});this.backend.on("error",function(Z,Y,X){U.error(Y,X)});this.backend.on("timeupdate",function(Y,X){U.trigger("timeupdate",X,U.getDuration())});this.backend.on("ready",function(){this.setVolume(U.volume+0.1);this.setVolume(U.volume-0.1);this.setVolume(U.volume)});this.backend.proxy(["waiting","playing","seeking","seeked","progress","ended","volumechange","play","canplay","pause"],this);this.backend.init();var V=this.backend.getElement();V.style.width="100%";V.style.height="100%";V.style.position="absolute";V.style.left=0;V.style.top=0;this.root.appendChild(V);this.trigger("backendchange",this.backend)}},_initSources:function(Y){var V=this.conf?this.conf.allow_backends:x(this.__backends);var U=this.__backends;for(var Z=0;Z<V.length;Z++){var X=V[Z];if(typeof U[X]==="undefined"){continue}for(var W=0;W<Y.length;W++){if(U[X].prototype.isSupported()&&U[X].prototype.canPlayType(Y[W].type)){this._initBackend(U[X]);this.source=Y[W];this.trigger("sourcechange",this.source);return true}}}return false},_initPlugins:function(V){for(var U in V){if(V[U]&&(typeof V[U].enabled==="undefined"||V[U].enabled)){this._plugins[U]=new this.__plugins[U](this,V[U])}}},getWidth:function(){return this.root.offsetWidth},getHeight:function(){return this.root.offsetHeight},supportMedia:function(Y){var V=this.conf?this.conf.allow_backends:x(this.__backends);var U=this.__backends;for(var X=0;X<V.length;X++){var W=V[X];if(typeof U[W]==="undefined"){continue}if(U[W].prototype.isSupported()&&U[W].prototype.canPlayType(Y)){return true}}return false},destroy:function(){if(this.backend){this._destroyBackend();this.backend=null}this._handlers={};this.root.parentElement.removeChild(this.root);return this},decodeErrorCode:function(U){var V={100:"We are working to fix this as soon as possible. Thanks for patience.",101:"Your browser can not reproduce this video. Please update your browser for the best viewing experience.",102:"Oops, try again! There is no video.",200:"We are working to fix this as soon as possible. Thanks for patience.",201:"Video temporarily is unavailable, please try again later."};return V[U]||"Unknown error"},error:function(V,U){this.trigger("error",V,U||this.decodeErrorCode(V))},setSources:function(U){if(U&&U.length){if(this.is_playing){this.pause()}this.source=null;this.sources=U}else{this.error(102)}return this},load:function(){var U=this;if(this.sources&&this.sources.length){if(this._initSources(this.sources)){if(this.backend.is_ready){this.backend.setSource(U.source.src,U.source.type)}else{this.backend.on("ready",function(V){V.handler.remove();this.setSource(U.source.src,U.source.type)})}this.is_start_load=true}else{this.error(101)}}else{this.error(102)}},play:function(){if(!this.is_playing){this.is_playing=true;if(this.is_start_load){this.backend.play()}else{this.on("canplay",function(U){U.handler.remove();this.backend.play()});this.load()}}return this},pause:function(){if(this.is_playing){this.backend.pause();this.is_playing=false}return this},getVolume:function(){if(this.backend){this.volume=this.backend.getVolume()}return this.volume},setVolume:function(U){this.volume=Math.min(1,Math.max(0,U));if(this.conf.cookieKeyVolume){g(this.conf.cookieKeyVolume,this.volume)}this.trigger("volumechange",this.volume);if(this.backend){this.backend.setVolume(this.volume)}},mute:function(){this._old_volume=this.getVolume();this.setVolume(0)},unmute:function(){this.setVolume(this._old_volume||1)},getDuration:function(){return this.backend.getDuration()},getCurrentTime:function(){return this.backend.getCurrentTime()},setProgress:function(U){var V=this.getDuration()/100*U;this.backend.setCurrentTime(V)},getProgress:function(){if(this.backend){return this.getCurrentTime()/this.getDuration()*100}else{return 0}}});HTML5Backend=(function(){function U(V){this.width="100%";this.height="100%";k(this,V);this.video=document.createElement("VIDEO");if(V.poster){this.video.poster=V.poster}this.video.controls=V.useDefaultControls}U.prototype=k(Object.create(CustomObject),{is_ready:false,isSupported:function(){return typeof document.createElement("VIDEO").play=="function"},isHLS:function(V){return["application/x-mpegURL","application/vnd.apple.mpegurl"].indexOf(V)>-1},canPlayTypeNative:function(V){var W=d();if(this.isHLS(V)){if(W.is_android&&W.version[0]>=4){return true}}return["maybe","probably"].indexOf(document.createElement("VIDEO").canPlayType(V))>-1},canPlayType:function(V){if(this.canPlayTypeNative(V)){return true}return false},setSource:function(X,W){var V=this;if(this.canPlayTypeNative(W)){this.video.src=X;this.video.load()}},getElement:function(){return this.video},destroy:function(){this.video.oncontextmenu=null},setWidth:function(V){this.video.style.width=V},setHeight:function(V){this.video.style.height=V},init:function(){var V=this;this.setWidth(this.width);this.setHeight(this.height);this.initEvents();this.on("ready",function(){V.is_ready=true});this.trigger("ready")},initEvents:function(){var V=this;this.video.onerror=function(){};this.video.oncontextmenu=function(){event.preventDefault()};this.video.addEventListener("loadedmetadata",function(){V.trigger("canplay")});this.video.addEventListener("durationchange",function(){V.trigger("durationchange",this.duration)});this.video.addEventListener("volumechange",function(){V.trigger("volumechange",this.muted?0:this.volume)});this.video.addEventListener("timeupdate",function(){var W=null;for(var X=0;X<this.buffered.length;X++){if(this.currentTime>this.buffered.start(X)&&this.currentTime<this.buffered.end(X)){W=this.duration-this.buffered.end(X)<0.5||Math.abs(this.currentTime-this.buffered.end(X))>0.5;break}}if(W!==null){if(W){if(V.is_waiting){V.trigger("playing");V.is_waiting=false}}else{V.is_waiting=true;V.trigger("waiting")}}V.trigger("timeupdate",this.currentTime);if(this.duration&&this.duration-this.currentTime<0.5){V.trigger("ended");this.pause();this.currentTime=0}});this.video.addEventListener("ended",function(){V.trigger("ended")});this.video.addEventListener("waiting",function(){V.trigger("waiting")});this.video.addEventListener("playing",function(){V.trigger("playing")});this.video.addEventListener("play",function(){V.trigger("play")});this.video.addEventListener("pause",function(){V.trigger("pause")});this.video.addEventListener("canplay",function(){V.trigger("canplay")});this.video.addEventListener("seeking",function(){V.trigger("seeking")});this.video.addEventListener("seeked",function(){V.trigger("seeked")});this.video.addEventListener("progress",function(){var X=[];for(var W=0;W<this.buffered.length;W++){X.push([this.buffered.start(W),this.buffered.end(W)])}V.trigger("progress",X)})},play:function(){this.video.play()},pause:function(){this.video.pause()},getCurrentTime:function(){return this.video.currentTime},getDuration:function(){return this.video.duration},setCurrentTime:function(V){if(this.video.readyState!=HTMLMediaElement.HAVE_NOTHING){this.video.currentTime=Math.max(0,Math.min(this.video.duration-0.9,V))}},setVolume:function(V){V=Math.max(0,Math.min(1,V||0));this.video.volume=V;this.video.muted=!V},getVolume:function(){return this.video.volume}});return U})();P.prototype.__backends.HTML5=HTML5Backend;function C(U){this.flash_swf=null;p(this,U);this.swf=document.createElement("OBJECT")}C.prototype=k(Object.create(CustomObject),{is_ready:false,_flashFn:function(V){var U="window";var W="__"+Math.random().toString(16).split(".")[1];window[W]=function(){V.apply(window,arguments)};return U+"."+W},init:function(){var U=this;this.on("ready",function(){U.is_ready=true});this.swf.setAttribute("type","application/x-shockwave-flash");this.swf.setAttribute("width","100%");this.swf.setAttribute("height","100%");this.swf.setAttribute("data",this.flash_swf);v(this.swf,"screen");var X={wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all",quality:"high",flashvars:"readyFunction="+this._flashFn(function(){U.initEvents()})};for(var V in X){var W=document.createElement("PARAM");W.setAttribute("name",V);W.setAttribute("value",X[V]);this.swf.appendChild(W)}},isSupported:function(){return r()},canPlayType:function(U){return["video/mp4","video/flv","video/x-flv","video/m4v","application/x-mpegURL"].indexOf(U)>-1},getElement:function(){return this.swf},destroy:function(){clearInterval(this._play_interval)},initEvents:function(){var U=this;this.swf.vjs_setProperty("eventProxyFunction",this._flashFn(function(W,V){switch(V){case"playing":U.trigger("playing");break;case"seeked":U.trigger("seeked");break;case"waiting":U.trigger("waiting");break;case"ended":U.trigger("ended");break;case"canplay":case"loadedmetadata":U.trigger("canplay");break;case"play":U.trigger("play");break;case"volumechange":U.trigger("volumechange",U.getVolume());break;case"durationchange":U.trigger("durationchange",U.getDuration());break}}));this.swf.vjs_setProperty("errorEventProxyFunction",this._flashFn(function(W,V){switch(V){case"srcnotfound":U.trigger("error",201);break;default:U.trigger("error",200)}}));this.on("play",function(){U.__timeupdate=setInterval(function(){U.trigger("progress",[[0,U.swf.vjs_getProperty("buffered")]]);U.trigger("timeupdate",U.getCurrentTime())},500)});this.on(["pause","ended"],function(){clearInterval(U.__timeupdate)});this.trigger("ready")},setSource:function(U){this.swf.vjs_src(U)},play:function(){this.swf.vjs_play()},pause:function(){this.swf.vjs_pause();this.trigger("pause")},getCurrentTime:function(){if(this.swf.vjs_getProperty){return this.swf.vjs_getProperty("currentTime")}return 0},getDuration:function(){if(this.swf.vjs_getProperty){return this.swf.vjs_getProperty("duration")}return 0},setCurrentTime:function(U){this.swf.vjs_setProperty("currentTime",U)},setVolume:function(U){this.swf.vjs_setProperty("volume",U)},getVolume:function(U){return this.swf.vjs_getProperty("volume")}});P.prototype.__backends.Flash=C;function j(V){var U=this;this.type;this.src;this.creative;k(this,V);this.player=null;this.use_html5=false;this.use_flash=false}j.prototype=k(Object.create(CustomObject),{show:function(V,Z,U,X){var W=this;this.player=new P(V,X);this.player.on("error",function(){});this.player.on("ended",function(){W.trigger("vastevent","complete",{},W.creative)});this.player.on("canplay",function(ab){ab.handler.remove();W.trigger("start",W);W.player.play()});this.player.on("pause",function(){W.trigger("vastevent","pause",{},W.creative)});this.player.on("resume",function(){W.trigger("vastevent","resume",{},W.creative)});var Y;this.player.on("volumechange",function(ac,ab){if(ab>0&&Y==0){W.trigger("vastevent","unmute",{},W.creative)}if(ab==0&&Y!=0){W.trigger("vastevent","mute",{},W.creative)}Y=ab});var aa=0;this.player.on("timeupdate",function(ae,ac){var ab=ac/this.getDuration()*100;if(ab>0&&aa==0){aa++;W.trigger("vastevent","start",{},W.creative);W.trigger("vastevent","creativeView",{},W.creative)}if(ab>25&&aa==1){aa++;W.trigger("vastevent","firstQuartile",{},W.creative)}if(ab>50&&aa==2){aa++;W.trigger("vastevent","midpoint",{},W.creative)}if(ab>75&&aa==3){aa++;W.trigger("vastevent","thirdQuartile",{},W.creative)}});this.player.setSources([{src:this.src,type:this.type}]);this.player.load()},getIsSupport:function(){return P.prototype.supportMedia(this.type)}});function R(V,U){this.creative;this.is_vpaid=false;k(this,U);this.is_error=false;this.on("vasterror",function(Z,X,W,Y){this.is_error=true});this.parse(V)}R.prototype=k(Object.create(CustomObject),{parse:function(W){var U=this;var V={type:W.getAttribute("type"),src:W.textContent.trim(),creative:this.creative};this.is_vpaid=this.is_vpaid||(W.getAttribute("apiFramework")||"").toLowerCase()=="vpaid";if(this.is_vpaid){this.media=new Q(V)}else{this.media=new j(V)}this.media.proxy(["vastevent","vasterror","vpaidevent","done","start"],U)},getIsSupport:function(){return this.media.getIsSupport()},show:function(V,X,U,W){this.media.show(V,X,U,W)}});function a(W,V){this.place=null;this.width;this.height;this.player_options={};this.vpaid_options={};k(this,V);this.width=this.width||this.place.offsetWidth;this.height=this.height||this.place.offsetHeight;this.id;this.skipoffset=null;this.sequence=1;this.is_vpaid=false;this.click_through=null;this.params={};this.tracking={};this.medias=[];this.is_ready=false;this.is_error=false;this.is_done=false;this.on("ready",function(){this.is_ready=true});this.on("vasterror",function(aa,Y,X,Z){this.is_error=true;this.place.innerHTML="";this.trigger("error")});this.on("vastevent",function(aa,Y,X,Z){switch(Y){case"clickthru":if(!X.no_fire_pixel){e(X.click_through)}break;case"skip":case"complete":this.trigger("done");break}t(this.tracking[Y])});this.on("start",function(X){U.trigger("linearstart",U)});this.on("done",function(){this.is_done=true});var U=this;setTimeout(function(){U.parse(W)},0)}a.prototype=k(Object.create(CustomObject),{parse:function(V){var U=this;this.id=V.getAttribute("id")||null;this.sequence=parseInt(V.getAttribute("sequence"))||1;this.is_vpaid=(V.getAttribute("apiFramework")||"").toLowerCase()=="vpaid";this.tracking=I(V.getElementsByTagName("TrackingEvents")[0]);if(ad_parameters_xml=V.getElementsByTagName("AdParameters")[0]){this.params.AdParameters=ad_parameters_xml.textContent.trim()}if(skipoffset_attr=V.getAttribute("skipoffset")){this.skipoffset=K(skipoffset_attr)}if(clicks_xml=V.getElementsByTagName("VideoClicks")[0]){if(through_xml=clicks_xml.getElementsByTagName("ClickThrough")[0]){this.click_through=through_xml.textContent.trim()}if(click_tracking_xml=V.getElementsByTagName("ClickTracking")[0]){this.tracking.clickthru=this.tracking.clickthru||[];this.tracking.clickthru.push({event:"clickthru",content:click_tracking_xml.textContent.trim()})}}z(V.getElementsByTagName("MediaFile"),function(W){var X=new R(W,{is_vpaid:U.is_vpaid,creative:U});X.proxy(["vasterror","vastevent","start"],U);U.medias.push(X)});this.trigger("ready")},show:function(){var U=this;if(this.medias.length){for(var V=0;V<this.medias.length;V++){var X=this.medias[V];if(X.getIsSupport()){this.media=X;break}}if(this.media){var W=B('<div style="position:absolute; width:100%; height:100%; top:0; background:black"></div>');U.place.appendChild(W);this.on("done",function(){U.place.removeChild(W)});if(this.media.is_vpaid){this.media.show(W,U.width,U.height,U.vpaid_options)}else{this.media.show(W,U.width,U.height,U.player_options)}}else{this.trigger("vasterror",403,"Couldn't find MediaFile that is supported by this video player, based on the attributes of the MediaFile element.",this)}}else{this.trigger("vasterror",400,"General Linear error. Video player is unable to display the Linear Ad.",this)}},play:function(){this.media.media.player.play()},pause:function(){this.media.media.player.pause()},skip:function(){this.trigger("vastevent","skip",{},this)},clickthru:function(U){this.trigger("vastevent","clickthru",{click_through:U},this)},setVolume:function(U){this.media.media.player.setVolume(U)},mute:function(){this.media.media.player.mute()},unmute:function(){this.media.media.player.unmute()}});function l(U){this.place;this.elm;this.width;this.height;this.is_vpaid=false;this.min_duration;this.resource;this.click_through;this.tracking=[];this.can_show=false;this.is_error=false;this.on("vasterror",function(Y,W,V,X){this.is_error=true});this.on("vastevent",function(Y,W,V,X){if(W=="clickthru"){e(V.click_through)}t(this.tracking[W])});this.parse(U)}l.prototype=k(Object.create(CustomObject),{parse:function(U){this.is_vpaid=(U.getAttribute("apiFramework")||"").toLowerCase()=="vpaid";this.width=U.getAttribute("width")||0;this.height=U.getAttribute("height")||0;this.tracking=I(U.getElementsByTagName("TrackingEvents")[0]);if(min_duration=U.getAttribute("minSuggestedDuration")){if(m=/^(\d{1,2}):(\d{1,2}):(\d{1,2})/.exec(min_duration)){this.min_duration=parseInt(m[1])*3600+parseInt(m[2])*60+parseInt(m[3])}}if(click_through_xml=U.getElementsByTagName("NonLinearClickThrough")[0]){this.click_through=click_through_xml.textContent}if(click_tracking_xml=U.getElementsByTagName("NonLinearClickTracking")[0]){this.tracking.clickthru=this.tracking.clickthru||[];this.tracking.clickthru.push({event:"clickthru",content:click_tracking_xml.textContent})}if(!this.resource&&(static_xml=U.getElementsByTagName("StaticResource")[0])){var V=static_xml.getAttribute("creativeType");if(this.supportMedia(V)){this.resource={type:V,src:static_xml.textContent.trim()}}}if(!this.resource&&(iframe_xml=U.getElementsByTagName("IFrameResource")[0])){this.resource={type:"iframe",src:iframe_xml.textContent.trim()}}if(!this.resource&&(html_xml=U.getElementsByTagName("HTMLResource")[0])){this.resource={type:"html",src:html_xml.textContent.trim()}}this.can_show=!!this.resource},show:function(V){var X=this;this.place=V;this.elm=B('<div class="nonlinear"><div class="close">x</div><div class="inner"></div></div>');var Y=this.elm.getElementsByClassName("close")[0];var W=this.elm.getElementsByClassName("inner")[0];this.elm.style.width=this.width+"px";this.elm.style.height=this.height+"px";this.elm.style.right="10px";this.elm.style.bottom="70px";var U=w(this.resource.type,this.resource.src);W.appendChild(U);if(this.click_through){E(this.elm,"click",function(){X.trigger("vastevent","clickthru",{click_through:X.click_through},X)})}if(this.min_duration){Y.style.display="none";setTimeout(function(){Y.style.display=""},this.min_duration*1000)}E(Y,"click",function(){X.close();return false});this.place.appendChild(this.elm);this.trigger("vastevent","creativeView",{},this)},close:function(){this.trigger("vastevent","collapse",{},this);this.trigger("vastevent","close",{},this);this.place.removeChild(this.elm)},supportMedia:function(U){return U!="application/x-shockwave-flash"||r()}});function y(W,V){this.place=null;k(this,V);this.sequence;this.required;this.banners=[];this.is_ready=false;this.is_error=false;this.on("ready",function(){this.is_ready=true});this.on("vasterror",function(aa,Y,X,Z){this.is_error=true});var U=this;setTimeout(function(){U.parse(W)},0)}y.prototype=k(Object.create(CustomObject),{parse:function(V){var U=this;this.sequence=parseInt(V.getAttribute("sequence"))||1;z(V.getElementsByTagName("NonLinear"),function(W){var X=new l(W);X.proxy(["vasterror","vastevent"],U);U.banners.push(X)});this.trigger("ready")},show:function(){var V=this;if(this.banners.length==0){V.trigger("vasterror",500,"General NonLinearAds error",V);return}var U=0;(function(){var W=arguments.callee;if(banner=V.banners[U]){if(banner.can_show){banner.on("close",function(){U++;W()});banner.show(V.place)}else{V.trigger("vasterror",503,"Couldnâ€™t find NonLinear resource with supported type.",V);U++;W()}}else{}})()}});function s(U){this.place;this.width;this.height;this.resource;this.click_through;this.tracking=[];this.is_error=false;this.on("vasterror",function(Y,W,V,X){this.is_error=true});this.on("vastevent",function(Y,W,V,X){if(W=="clickthru"){e(V.click_through)}t(this.tracking[W])});this.parse(U)}s.prototype=k(Object.create(CustomObject),{parse:function(U){this.width=U.getAttribute("width")||0;this.height=U.getAttribute("height")||0;this.tracking=I(U.getElementsByTagName("TrackingEvents")[0]);if(through_xml=U.getElementsByTagName("CompanionClickThrough")[0]){this.click_through=through_xml.textContent}if(click_tracking_xml=U.getElementsByTagName("CompanionClickTracking")[0]){this.tracking.clickthru=this.tracking.clickthru||[];this.tracking.clickthru.push({event:"clickthru",content:click_tracking_xml.textContent})}if(!this.resource&&(static_xml=U.getElementsByTagName("StaticResource")[0])){var V=static_xml.getAttribute("creativeType");if(this.supportMedia(V)){this.resource={type:V,src:static_xml.textContent.trim()}}}if(!this.resource&&(iframe_xml=U.getElementsByTagName("IFrameResource")[0])){this.resource={type:"iframe",src:iframe_xml.textContent.trim()}}if(!this.resource&&(html_xml=U.getElementsByTagName("HTMLResource")[0])){this.resource={type:"html",src:html_xml.textContent.trim()}}if(this.resource&&(ad_slot_id=U.getAttribute("adSlotID"))){if(custom_place=document.getElementById(ad_slot_id)){if(this.width==custom_place.offsetWidth&&this.height==custom_place.offsetHeight){this.place=custom_place}}}},show:function(){var U=this;var V=w(this.resource.type,this.resource.src);V.width=this.width;V.height=this.height;if(this.click_through){V.style.cursor="pointer";E(V,"click",function(){U.trigger("vastevent","clickthru",{click_through:U.click_through},U)})}this.place.innerHTML="";this.place.appendChild(V);U.trigger("vastevent","creativeView",{},this)},supportMedia:function(U){return U!="application/x-shockwave-flash"||r()}});function S(W,V){this.places=[];k(this,V);this.sequence;this.required;this.banners=[];this.is_ready=false;this.is_error=false;this.on("ready",function(){this.is_ready=true});this.on("vasterror",function(aa,Y,X,Z){this.is_error=true});var U=this;setTimeout(function(){U.parse(W)},0)}S.prototype=k(Object.create(CustomObject),{parse:function(V){var U=this;this.sequence=parseInt(V.getAttribute("sequence"))||1;this.required=V.getAttribute("required")||"any";if(this.required!="none"){z(V.getElementsByTagName("Companion"),function(W){var X=new s(W);X.proxy(["vasterror","vastevent"],U);U.banners.push(X)})}this.trigger("ready")},show:function(){var U=this;if(this.required!="none"){var V=[];var W=[];z(this.places,function(X){if(elm=document.getElementById(X.id)){V.push(X.width+"x"+X.height);W.push(elm)}});z(this.banners,function(X){if(X.place){if((i=W.indexOf(X.place))>-1){V[i]=null}}else{if((i=V.indexOf(X.width+"x"+X.height))>-1){V[i]=null;X.place=W[i]}}if(X.place){X.show()}else{U.trigger("vasterror",601,"Unable to display Companion because creative dimensions do not fit within Companion display area (i.e., no available space).",X);if(U.required=="all"){U.trigger("vasterror",602,"Unable to display Required Companion",U);return false}}})}}});function T(W,V){this.parent=null;this.linear_options={};this.nonlinear_options={};this.companion_options={};k(this,V);this.type;this.creative;this.tracking={};this.is_ready=false;this.is_error=false;this.is_linear_done=false;this.on("ready",function(){this.is_ready=true});this.on("vasterror",function(aa,Y,X,Z){this.is_error=true});this.on("vastevent",function(aa,Y,X,Z){t(this.tracking[Y])});this.on("lineardone",function(){this.is_linear_done=true});var U=this;setTimeout(function(){U.parse(W)},0)}T.prototype=k(Object.create(CustomObject),{parse:function(V){var U=this;this.id=V.getAttribute("id")||null;this.tracking=I(creatives_xml.getElementsByTagName("TrackingEvents")[0]);if(linear_xml=V.getElementsByTagName("Linear")[0]){this.type="linear";this.creative=new a(linear_xml,this.linear_options);this.creative.on(["done","error"],function(){setTimeout(function(){U.trigger("lineardone")},0)})}else{if(nonlinear_xml=V.getElementsByTagName("NonLinearAds")[0]){this.type="nonlinear";this.creative=new y(nonlinear_xml,this.nonlinear_options)}else{if(companion_xml=V.getElementsByTagName("CompanionAds")[0]){this.type="companion";this.creative=new S(companion_xml,this.companion_options)}else{this.trigger("vasterror",0,"",this);return}}}this.creative.parent=this;this.creative.proxy(["ready","vasterror","vastevent","linearstart"],U)},show:function(){var U=this;switch(this.type){case"linear":this.creative.show();break;case"nonlinear":this.creative.show();break;case"companion":this.creative.show();break}}});function G(W,V){this.parent=null;this.linear_options={};this.nonlinear_options={};this.companion_options={};k(this,V);this.error_url;this.impression_url;this.tracking={};this.creatives=[];this.linear=[];this.nonlinear=[];this.companion=[];this.is_ready=false;this.is_error=false;this.is_linear_done=false;this.on("ready",function(){this.is_ready=true});this.on("error",function(){this.is_error=true});this.on("lineardone",function(){this.is_linear_done=true});this.on("vastevent",function(aa,Y,X,Z){if(Y=="creativeView"){aa.handler.remove();if(this.impression_url){n(this.impression_url);this.trigger("vastevent","impression",{url:this.impression_url},this)}}});this.on("vasterror",function(aa,Y,X,Z){if(this.error_url){n(this.error_url,{ERRORCODE:Y})}});var U=this;setTimeout(function(){U.parse(W)},0)}G.prototype=k(Object.create(CustomObject),{parse:function(W){var U=this;if(error_xml=W.getElementsByTagName("Error")[0]){this.error_url=error_xml.textContent.trim()}if(impression_xml=W.getElementsByTagName("Impression")[0]){this.impression_url=impression_xml.textContent.trim()}if(creatives_xml=W.getElementsByTagName("Creatives")[0]){var V={parent:U,linear_options:U.linear_options,nonlinear_options:U.nonlinear_options,companion_options:U.companion_options};z(creatives_xml.getElementsByTagName("Creative"),function(Y){var X=new T(Y,V);U.creatives.push(X);X.on("ready",function(){if(X.type=="linear"){U.linear.push(X)}if(X.type=="nonlinear"){U.nonlinear.push(X)}if(X.type=="companion"){U.companion.push(X)}if(F(U.creatives,function(Z){return Z.is_ready||Z.is_error})){U.trigger("ready")}});X.proxy(["vasterror","vastevent","linearstart"],U)});this.linear.sort(function(Y,X){return Y.sequence-X.sequence});this.nonlinear.sort(function(Y,X){return Y.sequence-X.sequence});this.companion.sort(function(Y,X){return Y.sequence-X.sequence})}},start:function(){var U=this;this.on("lineardone",function(){U.startNonLinear()});this.startCompanion();this.startLinear()},startLinear:function(){var V=this;var U=0;(function(){var W=arguments.callee;if(creative=V.linear[U]){creative.on("lineardone",function(){U++;W()});creative.show()}else{V.trigger("lineardone")}})()},startNonLinear:function(){z(this.nonlinear,function(U){U.show()})},startCompanion:function(){z(this.companion,function(U){U.show()})}});function q(W,V){this.parent=null;this.linear_options={};this.nonlinear_options={};this.companion_options={};k(this,V);this.vast;this.error_url;this.impression_url;this.on("ready",function(){this.is_ready=true});this.on("error",function(){this.is_error=true});this.on("lineardone",function(){this.is_linear_done=true});this.on("vastevent",function(aa,Y,X,Z){if(Y=="creativeView"){aa.handler.remove();if(this.impression_url){n(this.impression_url);this.trigger("vastevent","impression",{url:this.impression_url},this)}}});this.on("vasterror",function(aa,Y,X,Z){if(this.error_url){n(this.error_url,{ERRORCODE:Y})}});var U=this;setTimeout(function(){U.parse(W)},0)}q.prototype=k(Object.create(CustomObject),{parse:function(W){var U=this;var V=W.getElementsByTagName("VASTAdTagURI")[0].textContent;if(error_xml=W.getElementsByTagName("Error")[0]){this.error_url=error_xml.textContent.trim()}if(impression_xml=W.getElementsByTagName("Impression")[0]){this.impression_url=impression_xml.textContent.trim()}this.vast=new O(V,{parent:this,linear_options:this.linear_options,nonlinear_options:this.nonlinear_options,companion_options:this.companion_options});this.vast.proxy(["ready","error","lineardone","vasterror","vastevent","linearstart"],U)},start:function(){this.vast.start()},startLinear:function(){this.vast.startLinear()},startCompanion:function(){this.vast.startCompanion()},startNonLinear:function(){this.vast.startNonLinear()}});function J(W,V){this.parent=null;this.linear_options={};this.nonlinear_options={};this.companion_options={};k(this,V);this.id;this.sequence;this.is_ready=false;this.is_error=false;this.is_linear_done=false;this.is_wrapper=false;this.on("ready",function(){this.is_ready=true});this.on("error",function(){this.is_error=true});this.on("lineardone",function(){this.is_linear_done=true});var U=this;setTimeout(function(){U.parse(W)},0)}J.prototype=k(Object.create(CustomObject),{parse:function(W){var U=this;this.id=W.getAttribute("id")||null;this.sequence=parseInt(W.getAttribute("sequence"))||1;var V={parent:this,linear_options:U.linear_options,nonlinear_options:U.nonlinear_options,companion_options:U.companion_options};if(wrapper_xml=W.getElementsByTagName("Wrapper")[0]){this.inline=new q(wrapper_xml,V)}else{if(inline_xml=W.getElementsByTagName("InLine")[0]){this.inline=new G(inline_xml,V)}else{this.trigger("error")}}this.inline.proxy(["ready","linearstart","lineardone","error","vastevent","vasterror"],U)},start:function(){this.inline.start()},startLinear:function(){this.inline.startLinear()},startCompanion:function(){this.inline.startCompanion()},startNonLinear:function(){this.inline.startNonLinear()}});function O(W,V){var U=this;this.parent=null;this.timeout=5000;this.linear_options={player_options:{},vpaid_options:{timeout:10000}};this.nonlinear_options={};this.companion_options={};k(this,V);this.url=W;this.ads=[];this.is_ready=false;this.is_error=false;this.is_linear_done=false;this.load(W);this.on("ready",function(){this.is_ready=true});this.on("error",function(){this.is_error=true});this.on("lineardone",function(){this.is_linear_done=true})}O.prototype=k(Object.create(CustomObject),{load:function(V){var U=this;var X=null;var W=setTimeout(function(){U.trigger("error",301,"Timeout of VAST URI provided in Wrapper element");X.abort()},this.timeout);X=L(V,function(Z,Y){clearTimeout(W);if(Z){if(!Y.responseXML||!Y.responseXML.documentElement){U.trigger("error",100,"XML parsing error");return}z(Y.responseXML.documentElement.getElementsByTagName("Ad"),function(aa){var ab=new J(aa,{parent:U,linear_options:U.linear_options,nonlinear_options:U.nonlinear_options,companion_options:U.companion_options});ab.on("ready",function(){if(F(U.ads,function(ac){return ac.is_ready||ac.is_error})){U.trigger("ready")}});ab.proxy(["linearstart","vastevent","vasterror","error"],U);U.ads.push(ab)});if(U.ads.length){U.ads.sort(function(ab,aa){return ab.sequence-aa.sequence})}else{U.trigger("error")}}else{U.trigger("error")}})},start:function(){var U=this;this.on("lineardone",function(){U.startNonLinear()});this.startCompanion();this.startLinear()},startLinear:function(){var V=this;var U=0;(function(){var W=arguments.callee;if(ad=V.ads[U]){ad.on("lineardone",function(){U++;W()});ad.startLinear()}else{if(!V.is_linear_done){V.trigger("lineardone")}}})()},startCompanion:function(){z(this.ads,function(U){U.startCompanion()})},startNonLinear:function(){z(this.ads,function(U){U.startNonLinear()})}});function b(U){this.creative=null;k(this,U);this.player=this.creative.media.media.player;this.dom=B('<div class="ad_controls_place"><div class="ad-info"><span><span class="ad-link">Visit advertiser\'s site</span><span style="margin:0 10px">&bull;</span></span><span class="timer"></span></div><div class="ad-skip"><div class="message"></div></div><div class="controls"><div class="progress readonly"><div class="load"></div><div class="play"></div></div><div class="play-pause"><svg><path class="play" transform="translate(-24, 0)" d="M26,0v24l20-12L26,0L26,0z"/><path class="pause" transform="translate(0, 0)" d="M3.5,0h7v24h-7V0z M13.5,0h7v24h-7V0z"/></svg></div><div class="tray"><div class="mute"><svg><g class="unmute" transform="translate(-48, 0)"><path d="M64.7,2.1L56.3,7h-5.8C49.7,7,49,7.7,49,8.5v7c0,0.8,0.7,1.5,1.5,1.5h5.8l8.4,4.9c1,0.6,2.3-0.1,2.3-1.3V3.4C67,2.3,65.7,1.6,64.7,2.1z"/><path d="M70.4,6.8c-0.1-0.5-0.7-0.9-1.2-0.8c-0.5,0.1-0.9,0.7-0.8,1.2C68.8,8.8,69,10.4,69,12s-0.2,3.2-0.5,4.7c-0.1,0.5,0.2,1.1,0.8,1.2c0.1,0,0.1,0,0.2,0c0.5,0,0.9-0.3,1-0.8c0.4-1.7,0.6-3.4,0.6-5.2S70.8,8.5,70.4,6.8z"/></g><path class="mute" transform="translate(-72, 0)" d="M73,15.5v-7C73,7.7,73.7,7,74.5,7h5.8l8.4-4.9c0.7-0.4,1.5-0.2,1.9,0.4L76.2,17h-1.7C73.7,17,73,16.3,73,15.5z M93.2,6.1c-0.5,0.1-0.9,0.7-0.8,1.2C92.8,8.8,93,10.4,93,12s-0.2,3.2-0.5,4.7c-0.1,0.5,0.2,1.1,0.8,1.2c0.1,0,0.1,0,0.2,0c0.5,0,0.9-0.3,1-0.8c0.4-1.7,0.6-3.4,0.6-5.2s-0.2-3.5-0.6-5.2C94.3,6.3,93.8,6,93.2,6.1z M81.3,17.6l7.5,4.3c1,0.6,2.3-0.1,2.3-1.3V7.8L81.3,17.6z M74.7,22.7l20-20c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-20,20c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3S74.5,22.9,74.7,22.7z"/></svg></div><div class="volume"><div class="level"></div></div></div></div></div>');this.init()}b.prototype=k(Object.create(CustomObject),{init:function(){this.initView();this.initEvents();this.initVolume();this.initAdControls()},getElement:function(){return this.dom},initView:function(){this.dom.style.position="absolute";this.dom.style.left=0;this.dom.style.right=0;this.dom.style.bottom=0;this.dom.style.top=0},initAdControls:function(){var ab=this;var X=this.creative;var aa=this.player;var V=this.dom.getElementsByClassName("ad-info")[0];var U=V.getElementsByClassName("timer")[0];var Z=this.dom.getElementsByClassName("ad-skip")[0];var Y=V.firstChild;aa.on("timeupdate",function(ae,af){U.innerHTML="Ad. "+ab.formatTime(aa.getDuration()-af)});if(X.click_through){E(Y,"click",function(){X.trigger("vastevent","clickthru",{click_through:X.click_through},X)})}else{Y.style.display="none"}if(X.skipoffset){var W=null;if(X.skipoffset.type=="seconds"){W=X.skipoffset.value}if(X.skipoffset.type=="percent"){W=aa.getDuration()/100*X.skipoffset.value}if(W){var ac=Z.getElementsByClassName("message")[0];aa.on("timeupdate",function(ae,af){if(af>W){ae.handler.remove();ac.innerHTML="Skip to video";E(Z,"mouseup",function(ag){X.trigger("vastevent","skip",{},X);return false})}else{ac.innerHTML="You can skip<br>to video<br>in "+parseInt(W-af)}})}}else{Z.style.display="none"}},initEvents:function(){var U=this;var X=this.dom.getElementsByClassName("play-pause")[0];var V=this.dom.getElementsByClassName("progress")[0];var W="play";this.player.on(["play","resume"],function(){W="play";o(U.dom,"paused");v(U.dom,"playing");U.delayHide()});this.player.on("pause",function(){W="pause";v(U.dom,"paused");o(U.dom,"playing");U.show()});this.player.on("timeupdate",function(Y,aa){var Z=V.getElementsByClassName("play")[0];Z.style.width=(aa/this.getDuration()*100)+"%"});E(this.dom,"click",function(Y){if(Y.target==U.dom){U.trigger(W=="play"?"pause":"play")}});E(X,"click",function(Y){U.trigger(W=="play"?"pause":"play")});E(this.dom,"mousemove",function(Y){U.show();U.delayHide()})},initVolume:function(){var U=this;var W=this.dom.getElementsByClassName("volume")[0];var X=W.getElementsByClassName("level")[0];var V=this.dom.getElementsByClassName("mute")[0];X.style.width="100%";E(W,"mousedown",function(Y){if(Y.which==1){var Z=W.getBoundingClientRect().left;U.trigger("volumechange",(Y.pageX-Z)/W.offsetWidth);E(document,"mousemove.volume",function(aa){v(W,"no-animate");U.trigger("volumechange",Math.max(0,Math.min(1,(aa.pageX-Z)/W.offsetWidth)))});E(document,"mouseup.volume",function(aa){o(W,"no-animate");N(document,["mousemove.volume","mouseup.volume"])})}});this.player.on("volumechange",function(Y,Z){X.style.width=Z*100+"%"})},formatTime:function(X){var W=this.player.getDuration()>=3600;var Y=X|0;var U=(Y/3600)|0;Y-=U*3600;var V=(Y/60)|0;Y-=V*60;return(W?("0"+U).substr(-2)+":":"")+("0"+V).substr(-2)+":"+("0"+Y).substr(-2)},show:function(){clearTimeout(this._t);this.dom.style.cursor="";v(this.dom,"show");o(this.dom,"hide")},delayHide:function(){var U=this;clearTimeout(this._t);this._t=setTimeout(function(){U.hide()},2000)},hide:function(){this.dom.style.cursor="none";v(this.dom,"hide");o(this.dom,"show")}});function u(U){var W=new b({creative:U});var V=U.media.media.player;W.on(["play","pause"],function(X){V[X.type]()});W.on("volumechange",function(Y,X){V.setVolume(X)});U.place.appendChild(W.getElement())}function f(){this.slot=null;this.iframe=null;this.vast=null;this.tags=[];this.tracking=[];this.vpaid_timeout=5;this.flash_swf="video.swf";this.vpaid_flash_bridge="vpaid_bridge.swf"}f.prototype={_handlers:{},trigger:function(U){console.log("TRIGGER",U);if(typeof this._handlers[U]!=="undefined"){for(var V=0;V<this._handlers[U].length;V++){var W=this._handlers[U][V];W.handler.apply(W.scope,arguments)}}},buildVAST:function(U){var V=this;var W=new O(U.tag,{linear_options:{place:this.slot,width:this.width,height:this.height,player_options:{flash_swf:this.flash_swf},vpaid_options:{timeout:this.vpaid_timeout*1000,vpaid_flash_bridge:this.vpaid_flash_bridge}}});W.on("*",function(X){console.log(">>>",X.type)});W.on("vasterror",function(Z,X,aa,Y){console.log("vasterror",X,aa)});W.on("vastevent",function(aa,Y,X,Z){console.log(Y,X,Z);z(V.tracking,function(ab){if(ab.event==Y||ab.event=="*"){n(ab.pixel,{AD:U.id,EVENT:Y,SITE:document.referrer,FLASH:""})}})});W.on("linearstart",function(Y,X){if(!X.is_vpaid){u(X)}});return W},handshakeVersion:function(U){return"2.0"},initAd:function(V,ab,W,X,Y,aa){var ac=this;this.width=V;this.height=ab;if(Y.AdParameters){try{var U=JSON.parse(Y.AdParameters);this.tags=U.ads;this.tracking=U.tracking;this.vpaid_timeout=U.timeout||this.vpaid_timeout;this.flash_swf=U.video_swf||this.flash_swf;this.vpaid_flash_bridge=U.vpaid_bridge_swf||this.vpaid_flash_bridge;if(aa.slot){this.slot=aa.slot;document.body.setAttribute("style","margin:0; padding:0");this.trigger("AdLoaded");return}}catch(Z){console.error(Z.message)}}this.trigger("AdError")},startAd:function(){var V=this;var U=0;var W=false;(function(){var X=arguments.callee;if(tag=V.tags[U]){V.current_vast=V.buildVAST(tag);V.current_vast.on("ready",function(){if(!W){W=true;V.trigger("AdStarted")}this.startLinear()});V.current_vast.on(["lineardone","error"],function(){U++;X()})}else{V.trigger("AdStopped")}})()},getAdDuration:function(){},getAdLinear:function(){return true},stopAd:function(V,U){},setAdVolume:function(U){},getAdVolume:function(){},resizeAd:function(W,U,V){},pauseAd:function(){},resumeAd:function(){},expandAd:function(){},getAdExpanded:function(){},getAdSkippableState:function(){},collapseAd:function(){},skipAd:function(){},subscribe:function(U,V,W){this._handlers[V]=this._handlers[V]||[];this._handlers[V].push({handler:U,scope:W})},unsubscribe:function(U){this._handlers[U]=[]}};return new f};